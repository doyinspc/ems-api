(this.webpackJsonpmesl=this.webpackJsonpmesl||[]).push([[38],{1075:function(e,t,a){"use strict";a.r(t);var n=a(698),r=a(3),l=a.n(r),c=a(217),s=(a(697),a(759),a(725)),u=a(937);t.default=Object(c.b)((function(e){return{staffsubject:e.staffsubjectReducer,user:e.userReducer}}),{getStaffsubjects:s.c})((function(e){var t=Object(r.useState)([]),a=Object(n.a)(t,2),c=(a[0],a[1],Object(r.useState)(0)),s=Object(n.a)(c,2),o=(s[0],s[1],Object(r.useState)(!0)),m=Object(n.a)(o,2);m[0],m[1];Object(r.useEffect)((function(){if(void 0!==e.user.activeterm){var t={data:JSON.stringify({termid:e.user.activeterm.termid,sessionid:e.user.activeterm.sessionid,clientid:e.user.user.id,grp:2}),cat:"staffclass",table:"accessstaffsubjectnum",narration:"get staffsubjects"};e.getStaffsubjects(t)}}),[e.user.activeterm]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(u.default,null))}))},746:function(e,t,a){"use strict";var n=a(698),r=a(3),l=a.n(r),c=(a(217),a(697)),s=a(699),u=a(218),o=a(747),m=a(748);t.a=function(e){var t=Object(r.useState)({}),a=Object(n.a)(t,2),i=a[0],d=a[1],E=Object(r.useState)({}),f=Object(n.a)(E,2),b=f[0],h=f[1],g=Object(r.useState)(0),p=Object(n.a)(g,2),v=p[0],S=p[1],O=e.dropdowns&&Array.isArray(e.dropdowns)&&e.dropdowns.length>4?e.dropdowns:[[],[],[],[]],y="",j="",w="";O.length>0&&(y=O[0].map((function(e,t){return l.a.createElement("option",{key:t,value:e.termid},e.name)})),j=O[1].map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.name)})),O[2].map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.name)})),w=O[0].map((function(e,t){return l.a.createElement("option",{key:t,value:JSON.stringify(e)},e.name)})));var N=Array.isArray(e.schools)?e.schools.map((function(e,t){return l.a.createElement("option",{value:JSON.stringify(e)},e.name)})):l.a.createElement("option",null);return l.a.createElement(l.a.Fragment,null,l.a.createElement(c.wb,null,l.a.createElement(c.u,{lg:12},l.a.createElement(c.j,null,l.a.createElement(c.n,null,l.a.createElement("h4",null,"Quick Menu")),l.a.createElement(c.k,null,l.a.createElement(c.w,null,l.a.createElement(c.wb,null,l.a.createElement(c.u,null,l.a.createElement(c.wb,{className:"d-block"},l.a.createElement("strong",null,"Change")),l.a.createElement(c.wb,null,l.a.createElement(c.u,{xs:"12",sm:"12",md:"6"},l.a.createElement(c.J,null,l.a.createElement(c.K,{row:!0},l.a.createElement(c.V,null,l.a.createElement(c.X,null,l.a.createElement(c.Y,null,"Change School")),l.a.createElement(c.xb,{id:"input3-group2",name:"input3-group2",placeholder:"Search Staff",onChange:function(e){return d(e.target.value)}},N),l.a.createElement(c.W,null,l.a.createElement(c.f,{onClick:function(){e.changeSchool(JSON.parse(i))},type:"button",color:"secondary"},l.a.createElement("i",{className:"fa fa-thumbs-up"}))))))),l.a.createElement(c.u,{xs:"12",sm:"12",md:"6"},l.a.createElement(c.J,null,l.a.createElement(c.K,{row:!0},l.a.createElement(c.V,null,l.a.createElement(c.X,null,l.a.createElement(c.Y,null,"Change Term")),l.a.createElement(c.xb,{onChange:function(e){return h(e.target.value)},id:"input3-group2",name:"input3-group2",placeholder:"Search Staff"},w),l.a.createElement(c.W,null,l.a.createElement(c.f,{onClick:function(){e.changeTerm(JSON.parse(b))},type:"button",color:"secondary"},l.a.createElement("i",{className:"fa fa-thumbs-up"})))))))))),l.a.createElement(c.wb,null,l.a.createElement(c.u,null,l.a.createElement(c.wb,{className:"d-block"},l.a.createElement("strong",null,"Navigate")),l.a.createElement(c.J,{action:"",method:"post"},l.a.createElement(c.wb,{xs:12},l.a.createElement(c.u,{xs:"12",sm:"12",md:"12"},l.a.createElement(c.wb,null,l.a.createElement(c.u,{xs:"12",sm:"4",md:"5",lg:"5",className:"ml-0"},l.a.createElement(c.K,{row:!0},l.a.createElement(c.V,null,l.a.createElement(c.X,null,l.a.createElement(c.Y,null,"Select Term")),l.a.createElement(c.xb,{custom:!0,size:"md",name:"term",id:"term",onChange:function(e){return h(e.target.value)}},l.a.createElement("option",{value:"0"},"Select Term"),y)))),l.a.createElement(c.u,{xs:"12",sm:"4",md:"5",lg:"5",className:"ml-0"},l.a.createElement(c.K,{row:!0},l.a.createElement(c.V,null,l.a.createElement(c.X,null,l.a.createElement(c.Y,null,"Select Class")),l.a.createElement(c.xb,{custom:!0,size:"md",name:"clasz",id:"clasz",onChange:function(e){return S(e.target.value)}},l.a.createElement("option",{value:"0"},"Select Class"),j)))),l.a.createElement(c.u,{xs:"12",sm:"3",md:"2",lg:"2",className:"ml-0"},l.a.createElement(c.K,{className:""},l.a.createElement(u.b,{type:"submit",className:"btn btn-success btn-block btn-sm",size:"sm",color:"primary",to:"/studentclasses/".concat(b,"/").concat(v)},l.a.createElement(s.a,{name:"cil-scrubber"})," Load !"))))))))),l.a.createElement(c.wb,null,l.a.createElement(c.u,null,l.a.createElement(c.wb,{className:"d-block"},l.a.createElement("strong",null,"Search")),l.a.createElement(c.wb,{className:"pr-2",xs:12},l.a.createElement(c.u,{md:"6"},l.a.createElement(o.a,null)),l.a.createElement(c.u,{className:"pr-2",md:"6"},l.a.createElement(m.a,null)))))))))))}},747:function(e,t,a){"use strict";var n=a(698),r=a(3),l=a.n(r),c=a(217),s=a(705),u=a(697);t.a=Object(c.b)((function(e){return{result:e.staffReducer.result,user:e.userReducer}}),{searchStaff:s.g})((function(e){var t=Object(r.useState)(),a=Object(n.a)(t,2),c=a[0],s=a[1],o=Object(r.useState)([]),m=Object(n.a)(o,2),i=m[0],d=m[1];Object(r.useEffect)((function(){void 0!==e.result&&Array.isArray(e.result)?d(e.result):d([])}),[e.result]),Object(r.useEffect)((function(){if(void 0!==c&&c.length>2){var t={data:JSON.stringify({search:c,schoolid:e.user.activeschool.id}),cat:"selected",table:"staffsearch",narration:"get all schools for access control"};e.searchStaff(t)}else d([])}),[c,e.user.activeschool.id]);var E=i.map((function(e,t){return l.a.createElement(u.fb,{key:t,target:"_blank",className:"m-0",href:"#/staffs/".concat(e.id),active:!0},l.a.createElement(u.wb,null,l.a.createElement(u.u,{xs:"2",className:"m-0"},l.a.createElement("img",{src:"http://127.0.0.1/ems/ems-api/api/"+e.photo,style:{height:"40px",width:"40px"},height:"30px",alt:"profile-image",class:"profile",onError:function(e){e.target.onerror=null,e.target.src="/ems/icons/profile_1.png"}})),l.a.createElement(u.u,null,l.a.createElement("strong",null,e.name),l.a.createElement("br",null),l.a.createElement("small",null,e.employment_no))))}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(u.wb,{xs:12},l.a.createElement(u.u,null,l.a.createElement(u.K,{row:!0},l.a.createElement(u.S,{size:"md",className:"w-100",value:c,onChange:function(e){return s(e.target.value)},placeholder:" Staff search..."})),l.a.createElement(u.j,{className:"mt-0",style:{display:"block",position:"absolute",zIndex:"101"}},l.a.createElement(u.eb,{style:{width:"300px"}},E)))))}))},748:function(e,t,a){"use strict";var n=a(698),r=a(3),l=a.n(r),c=a(217),s=a(708),u=a(697);t.a=Object(c.b)((function(e){return{result:e.studentReducer.result,user:e.userReducer}}),{searchStudent:s.e})((function(e){var t=Object(r.useState)(),a=Object(n.a)(t,2),c=a[0],s=a[1],o=Object(r.useState)([]),m=Object(n.a)(o,2),i=m[0],d=m[1];Object(r.useEffect)((function(){void 0!==e.result&&Array.isArray(e.result)?d(e.result):d([])}),[e.result]),Object(r.useEffect)((function(){if(void 0!==c&&c.length>2){var t={data:JSON.stringify({search:c,schoolid:e.user.activeschool.id}),cat:"selected",table:"studentsearch",narration:"get all schools for access control"};e.searchStudent(t)}else d([])}),[c,e.user.activeschool.id]);var E=i.map((function(e,t){return l.a.createElement(u.fb,{key:t,href:"/students/".concat(e.id),active:!0},l.a.createElement("strong",null,e.name),l.a.createElement("br",null),l.a.createElement("small",null,e.admission_no))}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(u.wb,{xs:12},l.a.createElement(u.u,null,l.a.createElement(u.K,{row:!0},l.a.createElement(u.S,{size:"md",className:"w-100",value:c,onChange:function(e){return s(e.target.value)},placeholder:" Student search..."})),l.a.createElement(u.j,{className:"mt-0",style:{display:"block",position:"absolute",zIndex:"101"}},l.a.createElement(u.eb,{style:{width:"300px"}},E)))))}))},759:function(e,t,a){"use strict";var n=a(698),r=a(697),l=a(3),c=a.n(l),s=a(217),u=a(734),o=a(746),m=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(r.wb,null,c.a.createElement(r.u,{lg:12},c.a.createElement(r.j,null,c.a.createElement(r.n,null,c.a.createElement(r.wb,null,c.a.createElement(r.u,{xs:10},c.a.createElement("h4",{id:"traffic",className:"card-title mb-0"},void 0!=e.activeschool&&e.activeterm.hasOwnProperty("name")&&e.activeschool.name?e.activeschool.name:c.a.createElement("i",null,"Please select a school or consult the admin")),c.a.createElement("div",{className:"small text-muted"},c.a.createElement("strong",null,void 0!=e.activeterm&&e.activeterm.hasOwnProperty("name")&&e.activeterm.name?e.activeterm.name:c.a.createElement("span",null," Welcome",c.a.createElement("small",null,c.a.createElement("i",null," (No active term)")))))),c.a.createElement(r.u,{className:"d-md-block btn-group"},c.a.createElement(r.g,{className:"pull-right"},c.a.createElement(r.f,{color:"primary",className:"",onClick:function(){return e.toggleMenu()}},c.a.createElement("i",{className:"fa fa-search"}))))))))))};t.a=Object(s.b)((function(e){return{activeTerm:e.termReducer.activeTerm,user:e.userReducer}}),{getUserDatas:u.a,getUserSchools:u.b,getUserTerms:u.c,getUserdropdowns:u.d,settSchool:u.e,settTerm:u.f})((function(e){var t=Object(l.useState)(!1),a=Object(n.a)(t,2),s=a[0],i=a[1];Object(l.useEffect)((function(){var t=void 0!==e.user.activeschool&&e.user.activeschool.hasOwnProperty("id")&&parseInt(e.user.activeschool.id)>0?e.user.activeschool.id:"null",a={data:JSON.stringify({schoolid:t}),cat:"dropdowns",table:"access",narration:"get all dropdowns"};e.getUserdropdowns(a);var n={data:JSON.stringify({schoolid:t}),cat:"accessterms",table:"access",narration:"get current term"};e.getUserTerms(n)}),[e.user.mid,e.user.activeschool]),Object(l.useEffect)((function(){var t={data:JSON.stringify({schools:e.user.myschools.join(",")}),cat:"schoolaccess",table:"schools",narration:"get all schools"};e.getUserSchools(t)}),[e.user.mid,e.user.myschools]),Object(l.useEffect)((function(){var t={data:JSON.stringify({sessionid:e.user.activeterm.sessionid,termid:e.user.activeterm.termid,staffid:e.user.mid}),cat:"dataaccess",table:"access",narration:"get all schools"};Object(u.a)(t)}),[e.user.mid,e.user.activeterm]);var d=e.user.dropdowns&&Array.isArray(e.user.dropdowns)?e.user.dropdowns:[[],[]],E=function(t){e.settSchool(t)};return c.a.createElement(c.a.Fragment,null,c.a.createElement(m,{activeterm:e.user.activeterm,activeschool:e.user.activeschool,schools:e.user.mySchoolData,changeSchool:function(e){return E(e)},toggleMenu:function(){i((function(e){return!e}))}}),c.a.createElement(r.v,{show:s},c.a.createElement(o.a,{dropdowns:d,schools:e.user.mySchoolData,changeSchool:function(e){return E(e)},changeTerm:function(t){return function(t){e.settTerm(t)}(t)}})))}))}}]);
//# sourceMappingURL=38.06350cce.chunk.js.map