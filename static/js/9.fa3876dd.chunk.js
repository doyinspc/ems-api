(this.webpackJsonpmesl=this.webpackJsonpmesl||[]).push([[9],{698:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(219);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,r=!1,c=void 0;try{for(var s,l=e[Symbol.iterator]();!(n=(s=l.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(u){r=!0,c=u}finally{try{n||null==l.return||l.return()}finally{if(r)throw c}}return a}}(e,t)||Object(n.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},705:function(e,t,a){"use strict";a.d(t,"e",(function(){return u})),a.d(t,"d",(function(){return o})),a.d(t,"g",(function(){return i})),a.d(t,"a",(function(){return d})),a.d(t,"c",(function(){return m})),a.d(t,"b",(function(){return p})),a.d(t,"f",(function(){return f})),a.d(t,"h",(function(){return y}));var n=a(700),r=a.n(n),c=a(33),s=a(6),l=s.c,u=function(e){return function(t,a){e.token=s.e,e.table="staffs",t({type:c.k}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.h,payload:e.data})})).catch((function(e){t({type:c.l,payload:e})}))}},o=function(e){return function(t,a){e.token=s.e,t({type:c.k}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.f,payload:e.data})})).catch((function(e){t({type:c.l,payload:e})}))}},i=function(e){return function(t,a){t({type:c.k}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.j,payload:e.data})})).catch((function(e){t({type:c.l,payload:e})}))}},d=function(e){return function(t,a){t({type:c.k}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.g,payload:e.data})})).catch((function(e){t({type:c.l,payload:e})}))}},m=function(e){return function(t,a){t({type:c.i,payload:e})}},p=function(e){return function(t,a){r.a.POST(l,{params:e},s.l).then((function(a){t({type:c.d,payload:e.id})})).catch((function(e){t({type:c.c,payload:e})}))}},f=function(e){return function(t){r.a.post(l,e,s.m).then((function(e){t({type:c.n,payload:e.data.data})})).catch((function(e){t({type:c.m,payload:e})}))}},y=function(e){return function(t,a){r.a.post(l,e,s.m).then((function(e){t({type:c.p,payload:e.data.data})})).catch((function(e){t({type:c.o,payload:e})}))}}},708:function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"e",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return d})),a.d(t,"d",(function(){return m})),a.d(t,"f",(function(){return p}));var n=a(700),r=a.n(n),c=a(37),s=a(6),l=s.b,u=function(e){return function(t,a){e.token=s.e,e.table="students",t({type:c.j}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.g,payload:e.data})})).catch((function(e){t({type:c.k,payload:e})}))}},o=function(e){return function(t,a){t({type:c.j}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.i,payload:e.data})})).catch((function(e){t({type:c.k,payload:e})}))}},i=function(e){return function(t,a){t({type:c.h,payload:e})}},d=function(e){return function(t,a){r.a.POST(l,{params:e},s.l).then((function(a){t({type:c.d,payload:e.id})})).catch((function(e){t({type:c.c,payload:e})}))}},m=function(e){return function(t){r.a.post(l,e,s.m).then((function(e){t({type:c.m,payload:e.data.data})})).catch((function(e){t({type:c.l,payload:e})}))}},p=function(e){return function(t,a){r.a.post(l,e,s.m).then((function(e){t({type:c.o,payload:e.data.data})})).catch((function(e){t({type:c.n,payload:e})}))}}},714:function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return d})),a.d(t,"e",(function(){return m}));var n=a(700),r=a.n(n),c=a(48),s=a(6),l=s.b,u=function(e){return function(t,a){e.token=s.e,t({type:c.h}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.f,payload:e.data})})).catch((function(e){t({type:c.i,payload:e})}))}},o=function(e){return function(t,a){t({type:c.g,payload:e})}},i=function(e){return function(t,a){r.a.POST(l,{params:e},s.l).then((function(a){t({type:c.d,payload:e.id})})).catch((function(e){t({type:c.c,payload:e})}))}},d=function(e){return function(t){r.a.post(l,e,s.m).then((function(e){t({type:c.k,payload:e.data.data})})).catch((function(e){t({type:c.j,payload:e})}))}},m=function(e){return function(t,a){r.a.post(l,e,s.m).then((function(e){t({type:c.m,payload:e.data.data})})).catch((function(e){t({type:c.l,payload:e})}))}}},724:function(e,t,a){"use strict";a.d(t,"e",(function(){return u})),a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return d})),a.d(t,"g",(function(){return m})),a.d(t,"f",(function(){return p})),a.d(t,"a",(function(){return f})),a.d(t,"h",(function(){return y}));var n=a(700),r=a.n(n),c=a(25),s=a(6),l=s.b,u=function(e){return function(t,a){e.token=s.e,t({type:c.l}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.g,payload:e.data})})).catch((function(e){t({type:c.m,payload:e})}))}},o=function(e){return function(t,a){e.token=s.e,r.a.get(l,{params:e},s.l).then((function(e){t({type:c.h,payload:e.data})})).catch((function(e){t({type:c.m,payload:e})}))}},i=function(e){return function(t,a){e.token=s.e,t({type:c.l}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.k,payload:e.data})})).catch((function(e){t({type:c.m,payload:e})}))}},d=function(e,t){return function(a,n){r.a.post(l,e,s.m).then((function(e){a({type:c.e,payload:t})})).catch((function(e){a({type:c.d,payload:e})}))}},m=function(e){return function(t){r.a.post(l,e,s.m).then((function(e){t({type:c.q,payload:e.data.data})})).catch((function(e){t({type:c.p,payload:e})}))}},p=function(e){return function(t){r.a.post(l,e,s.m).then((function(e){t({type:c.n,payload:e.data.data})})).catch((function(e){t({type:c.o,payload:e})}))}},f=function(e){return function(t){r.a.post(l,e,s.m).then((function(e){t({type:c.c,payload:e.data})})).catch((function(e){t({type:c.o,payload:e})}))}},y=function(e){return function(t,a){r.a.post(l,e,s.m).then((function(e){t({type:c.v,payload:e.data.data})})).catch((function(e){t({type:c.u,payload:e})}))}}},725:function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return d})),a.d(t,"e",(function(){return m})),a.d(t,"f",(function(){return p}));var n=a(700),r=a.n(n),c=a(43),s=a(6),l=s.c,u=function(e){return function(t,a){e.token=s.e,t({type:c.i}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.f,payload:e.data})})).catch((function(e){t({type:c.j,payload:e})}))}},o=function(e){return function(t,a){e.token=s.e,t({type:c.i}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.h,payload:e.data})})).catch((function(e){t({type:c.j,payload:e})}))}},i=function(e){return function(t,a){t({type:c.g,payload:e})}},d=function(e,t){return function(a,n){r.a.post(l,e,s.m).then((function(e){a({type:c.d,payload:t})})).catch((function(e){a({type:c.c,payload:e})}))}},m=function(e){return function(t){r.a.post(l,e,s.m).then((function(e){t({type:c.l,payload:e.data.data})})).catch((function(e){t({type:c.k,payload:e})}))}},p=function(e){return function(t,a){r.a.post(l,e,s.m).then((function(e){t({type:c.n,payload:e.data.data})})).catch((function(e){t({type:c.m,payload:e})}))}}},731:function(e,t,a){"use strict";a.d(t,"d",(function(){return u})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return d})),a.d(t,"e",(function(){return m})),a.d(t,"f",(function(){return p}));var n=a(700),r=a.n(n),c=a(42),s=a(6),l=s.b,u=function(e){return function(t,a){e.token=s.e,t({type:c.i}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.f,payload:e.data})})).catch((function(e){t({type:c.j,payload:e})}))}},o=function(e){return function(t,a){e.token=s.e,t({type:c.i}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.h,payload:e.data})})).catch((function(e){t({type:c.j,payload:e})}))}},i=function(e){return function(t,a){t({type:c.g,payload:e})}},d=function(e,t){return function(a,n){r.a.post(l,e,s.m).then((function(e){a({type:c.d,payload:t})})).catch((function(e){a({type:c.c,payload:e})}))}},m=function(e){return function(t){r.a.post(l,e,s.m).then((function(e){t({type:c.l,payload:e.data.data})})).catch((function(e){t({type:c.k,payload:e})}))}},p=function(e){return function(t,a){console.log(e),r.a.post(l,e,s.m).then((function(e){t({type:c.n,payload:e.data.data})})).catch((function(e){t({type:c.m,payload:e})}))}}},735:function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return d})),a.d(t,"e",(function(){return m}));var n=a(700),r=a.n(n),c=a(56),s=a(6),l=s.b,u=function(e){return function(t,a){e.token=s.e,e.table="reports",t({type:c.h}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.f,payload:e.data})})).catch((function(e){t({type:c.i,payload:e})}))}},o=function(e){return function(t,a){t({type:c.g,payload:e})}},i=function(e){return function(t,a){r.a.POST(l,{params:e},s.l).then((function(a){t({type:c.d,payload:e.id})})).catch((function(e){t({type:c.c,payload:e})}))}},d=function(e){return function(t){r.a.post(l,e,s.m).then((function(e){t({type:c.k,payload:e.data.data})})).catch((function(e){t({type:c.j,payload:e})}))}},m=function(e){return function(t,a){r.a.post(l,e,s.m).then((function(e){t({type:c.m,payload:e.data.data})})).catch((function(e){t({type:c.l,payload:e})}))}}},738:function(e,t,a){"use strict";a.d(t,"d",(function(){return u})),a.d(t,"c",(function(){return o})),a.d(t,"e",(function(){return i})),a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return m})),a.d(t,"f",(function(){return p})),a.d(t,"h",(function(){return f})),a.d(t,"g",(function(){return y}));var n=a(700),r=a.n(n),c=a(34),s=a(6),l=s.b,u=function(e){return function(t,a){e.token=s.e,t({type:c.j}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.f,payload:e.data})})).catch((function(e){t({type:c.k,payload:e})}))}},o=function(e){return function(t,a){e.token=s.e,t({type:c.j}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.i,payload:e.data})})).catch((function(e){t({type:c.k,payload:e})}))}},i=function(e){return function(t,a){e.token=s.e,t({type:c.j}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.h,payload:e.data})})).catch((function(e){t({type:c.k,payload:e})}))}},d=function(e){return function(t,a){t({type:c.g,payload:e})}},m=function(e,t){return function(a,n){r.a.post(l,e,s.m).then((function(e){a({type:c.d,payload:t})})).catch((function(e){a({type:c.c,payload:e})}))}},p=function(e){return function(t){r.a.post(l,e,s.m).then((function(e){t({type:c.m,payload:e.data.data})})).catch((function(e){t({type:c.l,payload:e})}))}},f=function(e){return function(t,a){r.a.post(l,e,s.m).then((function(e){t({type:c.r,payload:e.data.data})})).catch((function(e){t({type:c.q,payload:e})}))}},y=function(e){return function(t,a){t({type:c.o}),r.a.post(l,e,s.m).then((function(e){t({type:c.p,payload:e.data.data})})).catch((function(e){t({type:c.n,payload:e})}))}}},740:function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return d})),a.d(t,"e",(function(){return m}));var n=a(700),r=a.n(n),c=a(55),s=a(6),l=s.b,u=function(e){return function(t,a){e.token=s.e,t({type:c.h}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.f,payload:e.data})})).catch((function(e){t({type:c.i,payload:e})}))}},o=function(e){return function(t,a){t({type:c.g,payload:e})}},i=function(e){return function(t,a){r.a.POST(l,{params:e},s.l).then((function(a){t({type:c.d,payload:e.id})})).catch((function(e){t({type:c.c,payload:e})}))}},d=function(e){return function(t){r.a.post(l,e,s.m).then((function(e){t({type:c.k,payload:e.data.data})})).catch((function(e){t({type:c.j,payload:e})}))}},m=function(e){return function(t,a){r.a.post(l,e,s.m).then((function(e){t({type:c.m,payload:e.data.data})})).catch((function(e){t({type:c.l,payload:e})}))}}},749:function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return d})),a.d(t,"e",(function(){return m}));var n=a(700),r=a.n(n),c=a(54),s=a(6),l=s.b,u=function(e){return function(t,a){e.token=s.e,e.table="fees",t({type:c.h}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.f,payload:e.data})})).catch((function(e){t({type:c.i,payload:e})}))}},o=function(e){return function(t,a){t({type:c.g,payload:e})}},i=function(e){return function(t,a){r.a.POST(l,{params:e},s.l).then((function(a){t({type:c.d,payload:e.id})})).catch((function(e){t({type:c.c,payload:e})}))}},d=function(e){return function(t){r.a.post(l,e,s.m).then((function(e){t({type:c.k,payload:e.data.data})})).catch((function(e){t({type:c.j,payload:e})}))}},m=function(e){return function(t,a){r.a.post(l,e,s.m).then((function(e){t({type:c.m,payload:e.data.data})})).catch((function(e){t({type:c.l,payload:e})}))}}},754:function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return d})),a.d(t,"e",(function(){return m}));var n=a(700),r=a.n(n),c=a(53),s=a(6),l=s.b,u=function(e){return function(t,a){e.token=s.e,e.table="accounts",t({type:c.h}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.f,payload:e.data})})).catch((function(e){t({type:c.i,payload:e})}))}},o=function(e){return function(t,a){t({type:c.g,payload:e})}},i=function(e){return function(t,a){r.a.POST(l,{params:e},s.l).then((function(a){t({type:c.d,payload:e.id})})).catch((function(e){t({type:c.c,payload:e})}))}},d=function(e){return function(t){r.a.post(l,e,s.m).then((function(e){t({type:c.k,payload:e.data.data})})).catch((function(e){t({type:c.j,payload:e})}))}},m=function(e){return function(t,a){r.a.post(l,e,s.m).then((function(e){t({type:c.m,payload:e.data.data})})).catch((function(e){t({type:c.l,payload:e})}))}}},765:function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return d})),a.d(t,"e",(function(){return m}));var n=a(700),r=a.n(n),c=a(59),s=a(6),l=s.b,u=function(e){return function(t,a){e.token=s.e,e.table="gradeunits",t({type:c.h}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.f,payload:e.data})})).catch((function(e){t({type:c.i,payload:e})}))}},o=function(e){return function(t,a){t({type:c.g,payload:e})}},i=function(e){return function(t,a){r.a.POST(l,{params:e},s.l).then((function(a){t({type:c.d,payload:e.id})})).catch((function(e){t({type:c.c,payload:e})}))}},d=function(e){return function(t){r.a.post(l,e,s.m).then((function(e){t({type:c.k,payload:e.data.data})})).catch((function(e){t({type:c.j,payload:e})}))}},m=function(e){return function(t,a){r.a.post(l,e,s.m).then((function(e){t({type:c.m,payload:e.data.data})})).catch((function(e){t({type:c.l,payload:e})}))}}},777:function(e,t,a){"use strict";a.d(t,"f",(function(){return u})),a.d(t,"d",(function(){return o})),a.d(t,"e",(function(){return i})),a.d(t,"c",(function(){return d})),a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return p})),a.d(t,"g",(function(){return f})),a.d(t,"h",(function(){return y})),a.d(t,"i",(function(){return b})),a.d(t,"j",(function(){return E}));var n=a(700),r=a.n(n),c=a(26),s=a(6),l=s.d,u=function(e){return function(t,a){e.token=s.e,t({type:c.k}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.h,payload:e.data})})).catch((function(e){t({type:c.l,payload:e})}))}},o=function(e){return function(t,a){e.token=s.e,t({type:c.k}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.j,payload:e.data})})).catch((function(e){t({type:c.l,payload:e})}))}},i=function(e){return function(t,a){e.token=s.e,t({type:c.k}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.g,payload:e.data})})).catch((function(e){t({type:c.l,payload:e})}))}},d=function(e){return function(t,a){t({type:c.i,payload:e})}},m=function(e){return function(t,a){r.a.POST(l,{params:e},s.l).then((function(a){t({type:c.e,payload:e.id})})).catch((function(e){t({type:c.d,payload:e})}))}},p=function(e){return function(t,a){r.a.POST(l,{params:e},s.l).then((function(a){t({type:c.c,payload:e.id})})).catch((function(e){t({type:c.d,payload:e})}))}},f=function(e){return function(t){r.a.post(l,e,s.m).then((function(e){t({type:c.o,payload:e.data.data})})).catch((function(e){t({type:c.n,payload:e})}))}},y=function(e){return function(t){r.a.post(l,e,s.m).then((function(e){t({type:c.m,payload:e.data.data})})).catch((function(e){t({type:c.n,payload:e})}))}},b=function(e){return function(t,a){r.a.post(l,e,s.m).then((function(e){t({type:c.r,payload:e.data.data})})).catch((function(e){t({type:c.q,payload:e})}))}},E=function(e){return function(t,a){r.a.post(l,e,s.m).then((function(e){t({type:c.p,payload:e.data.data})})).catch((function(e){t({type:c.q,payload:e})}))}}},784:function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return d})),a.d(t,"e",(function(){return m}));var n=a(700),r=a.n(n),c=a(61),s=a(6),l=s.c,u=function(e){return function(t,a){e.token=s.e,t({type:c.h}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.f,payload:e.data})})).catch((function(e){t({type:c.i,payload:e})}))}},o=function(e){return function(t,a){t({type:c.g,payload:e})}},i=function(e,t){return function(a,n){r.a.post(l,e,s.m).then((function(e){a({type:c.d,payload:t})})).catch((function(e){a({type:c.c,payload:e})}))}},d=function(e){return function(t){r.a.post(l,e,s.m).then((function(e){t({type:c.k,payload:e.data.data})})).catch((function(e){t({type:c.j,payload:e})}))}},m=function(e){return function(t,a){r.a.post(l,e,s.m).then((function(e){t({type:c.m,payload:e.data.data})})).catch((function(e){t({type:c.l,payload:e})}))}}},788:function(e,t,a){"use strict";var n=a(698),r=a(3),c=a.n(r),s=a(217),l=a(708),u=a(697);t.a=Object(s.b)((function(e){return{result:e.studentReducer.result,user:e.userReducer}}),{searchStudent:l.e})((function(e){var t=Object(r.useState)(),a=Object(n.a)(t,2),s=a[0],l=a[1],o=Object(r.useState)([]),i=Object(n.a)(o,2),d=i[0],m=i[1];Object(r.useEffect)((function(){void 0!==e.result&&Array.isArray(e.result)?m(e.result):m([])}),[e.result]),Object(r.useEffect)((function(){if(void 0!==s&&s.length>2){var t={data:JSON.stringify({search:s,schoolid:e.user.activeschool.id}),cat:"selected",table:"studentsearch",narration:"get all schools for access control"};e.searchStudent(t)}else m([])}),[s,e.user.activeschool.id]);var p=d.map((function(t,a){return c.a.createElement(u.fb,{key:a,target:"_blank",className:"m-0",onClick:function(){return e.studentx(t)},active:!0},c.a.createElement(u.wb,null,c.a.createElement(u.u,{xs:"2",className:"m-0"},c.a.createElement("img",{src:"http://127.0.0.1/ems/ems-api/api/"+t.photo,style:{height:"40px",width:"40px"},height:"30px",alt:"profile-image",class:"profile",onError:function(e){e.target.onerror=null,e.target.src="/ems/icons/profile_1.png"}})),c.a.createElement(u.u,null,c.a.createElement("strong",null,t.name),c.a.createElement("br",null),c.a.createElement("small",null,t.admission_no))))}));return c.a.createElement(c.a.Fragment,null,c.a.createElement(u.wb,{xs:12},c.a.createElement(u.u,{xs:12},c.a.createElement(u.K,null,c.a.createElement(u.S,{size:"md",className:"w-100",value:s,onChange:function(e){return l(e.target.value)},placeholder:" Search for students... Name or Admission number"})),c.a.createElement(u.j,{className:"mt-1",style:{display:"block",position:"absolute",zIndex:"101"}},c.a.createElement(u.eb,{style:{width:"300px"},onMouseLeave:function(){return m([])}},p)))))}))},800:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return d}));var n=a(700),r=a.n(n),c=a(63),s=a(6),l=s.c,u=function(e){return function(t,a){e.token=s.e,t({type:c.h}),r.a.get(l,{params:e},s.l).then((function(e){t({type:c.f,payload:e.data})})).catch((function(e){t({type:c.i,payload:e})}))}},o=function(e,t){return function(a,n){r.a.post(l,e,s.m).then((function(e){a({type:c.d,payload:t})})).catch((function(e){a({type:c.c,payload:e})}))}},i=function(e){return function(t){r.a.post(l,e,s.m).then((function(e){t({type:c.k,payload:e.data.data})})).catch((function(e){t({type:c.j,payload:e})}))}},d=function(e){return function(t,a){r.a.post(l,e,s.m).then((function(e){t({type:c.m,payload:e.data.data})})).catch((function(e){t({type:c.l,payload:e})}))}}},937:function(e,t,a){"use strict";a.r(t);var n=a(698),r=a(3),c=a.n(r),s=a(217),l=a(731),u=a(800),o=a(700),i=a.n(o),d=a(44),m=a(6),p=m.b,f=a(734),y=a(24),b=a(218),E=a(144),h=a.n(E),g=a(702),v=a.n(g),j=a(697),O=a(699),k=a(712),S=function(e){Object(y.i)(),Object(y.g)();for(var t=e.data&&Array.isArray(e.data)?e.data.filter((function(e){return null!=e||void 0!=e})):[],a=t.filter((function(e){return"Female"===e.gender})),n=t.filter((function(e){return"Male"===e.gender})),r={},s=0;s<t.length;s++)t[s].departmentid in r?r[t[s].departmentid]++:r[t[s].departmentid]=1;var l={};for(s=0;s<t.length;s++)t[s].religion in l?l[t[s].religion]++:l[t[s].religion]=1;var u={};for(s=0;s<t.length;s++)t[s].gender in u?u[t[s].gender]++:u[t[s].gender]=1;var o={};for(s=0;s<t.length;s++)t[s].soo in o?o[t[s].soo]++:o[t[s].soo]=1;var i={};for(s=0;s<t.length;s++){var d=new Date(t[s].dob).getFullYear(),m=Math.round((new Date).getFullYear()-d);m in i?i[m]++:i[m]=1}return c.a.createElement(c.a.Fragment,null,c.a.createElement(c.a.Fragment,null,c.a.createElement(j.wb,{className:"mt-20 py-90"},c.a.createElement(j.u,{xs:"12",sm:"6",lg:"4"},c.a.createElement(j.Vb,{text:"Male",header:n.length,color:"success",iconPadding:!1},c.a.createElement(O.a,{width:24,name:"cil-user",className:"mx-5"}))),c.a.createElement(j.u,{xs:"12",sm:"6",lg:"4"},c.a.createElement(j.Vb,{text:"Female",header:a.length,color:"danger",iconPadding:!1},c.a.createElement(O.a,{width:24,name:"cil-user-female",className:"mx-5"}))),c.a.createElement(j.u,{xs:"12",sm:"6",lg:"4"},c.a.createElement(j.Vb,{text:"Total Studentclass",header:n.length+a.length,color:"info",iconPadding:!1},c.a.createElement("i",{className:"fa fa-users fa-2x mx-5"})))),c.a.createElement(j.wb,null,c.a.createElement(j.u,{xs:"12",sm:"12",md:"6"},c.a.createElement(j.j,null,c.a.createElement(j.n,null,"Gender"),c.a.createElement(j.k,null,c.a.createElement(k.d,{type:"pie",datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16"],data:Object.values(u)}],labels:Object.keys(u),options:{tooltips:{enabled:!0}}})))),c.a.createElement(j.u,{xs:"12",sm:"12",md:"6"},c.a.createElement(j.j,null,c.a.createElement(j.n,null,"Religion"),c.a.createElement(j.k,null,c.a.createElement(k.d,{type:"pie",datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16"],data:Object.values(l)}],labels:Object.keys(l),options:{tooltips:{enabled:!0}}}))))),c.a.createElement(j.wb,null,c.a.createElement(j.u,{xs:"12",sm:"12",md:"12"},c.a.createElement(j.j,null,c.a.createElement(j.n,null,"Age Distrubution"),c.a.createElement(j.k,null,c.a.createElement(k.a,{type:"barchart",datasets:[{backgroundColor:["#41B883","#E46651","#045800","#4AB883","#E96651","#09E0FF","#DD1116","#096651","#19E0FF","#296651","#39E0FF","#41B23","#E22651","#045800","#22B883","#226651","#55E0FF","#551116","#09aa51","#19bbFF","#29CC51","#39DDFF"],data:Object.values(i)}],labels:Object.keys(i),options:{tooltips:{enabled:!0}}}))))),c.a.createElement(j.wb,null,c.a.createElement(j.u,{xs:"12",sm:"12",md:"12"},c.a.createElement(j.j,null,c.a.createElement(j.n,null,"State of Origin"),c.a.createElement(j.k,null,c.a.createElement(k.a,{type:"barchart",datasets:[{backgroundColor:["#41B883","#E46651","#045800","#4AB883","#E96651","#09E0FF","#DD1116","#096651","#19E0FF","#296651","#39E0FF","#41B23","#E22651","#045800","#22B883","#226651","#55E0FF","#551116","#09aa51","#19bbFF","#29CC51","#39DDFF"],data:Object.values(o)}],labels:Object.keys(o),options:{tooltips:{enabled:!0}}})))))))},N=function(e){var t=Object(y.g)(),a=(e.data&&Array.isArray(e.data)?e.data.filter((function(e){return null!=e||void 0!=e})):[]).map((function(e,a){return c.a.createElement("tr",{key:a,onClick:function(){return t.push("/studentclasss/".concat(e.id))}},c.a.createElement("td",{className:"text-center"},a+1),c.a.createElement("td",null,c.a.createElement("div",null,"".concat(e.surname," ").concat(e.firstname," ").concat(e.middlename))),c.a.createElement("td",null,e.g1_name.length>0?c.a.createElement(c.a.Fragment,null,c.a.createElement("strong",null,e.g1_name," (",c.a.createElement("i",null,e.g1_rel),") ",c.a.createElement("i",{className:"text-info",style:{textTransform:"capitalize"}},e.g1_place))," ",c.a.createElement("a",{href:"mailto:".concat(e.g1_phone1)},e.g1_phone1)," ",c.a.createElement("a",{href:"mailto:".concat(e.g1_phone2)},e.g1_phone2),c.a.createElement("a",{href:"mailto:".concat(e.g1_email)},e.g1_email)," ",e.g1_address):"",c.a.createElement("br",null),e.g2_name.length>0?c.a.createElement(c.a.Fragment,null,c.a.createElement("strong",null,e.g2_name," (",c.a.createElement("i",null,e.g2_rel),") ",c.a.createElement("i",{className:"text-info",style:{textTransform:"capitalize"}},e.g1_place))," ",c.a.createElement("a",{href:"mailto:".concat(e.g2_phone1)},e.g2_phone1)," ",c.a.createElement("a",{href:"mailto:".concat(e.g2_phone2)},e.g2_phone2),c.a.createElement("a",{href:"mailto:".concat(e.g2_email)},e.g2_email)," ",e.g2_address):""))}));return c.a.createElement(c.a.Fragment,null,c.a.createElement("table",{className:"table table-hover table-outline mb-0 d-none d-sm-table"},c.a.createElement("thead",{className:"thead-light"},c.a.createElement("tr",null,c.a.createElement("th",{className:"text-center"},"Studentclass ID"),c.a.createElement("th",null,"Fullname"),c.a.createElement("th",{className:"text-center"},"Phone"),c.a.createElement("th",{className:"text-center"},"Email"),c.a.createElement("th",null,"Address"))),c.a.createElement("tbody",null,a)))},x=function(e){var t=(e.data&&Array.isArray(e.data)?e.data.filter((function(e){return null!=e||void 0!=e})):[]).map((function(e,t){return c.a.createElement(j.j,{onClick:function(){return t=e.id,void window.open("/ems#/students/"+t);var t},key:t,className:"mx-2 my-2",style:{width:"100px",height:"auto"}},c.a.createElement(j.n,{className:"m-0 text-center"},c.a.createElement("b",{style:{textTransform:"capitalize"}},e.admission_no)),c.a.createElement(j.k,{className:"m-0 p-0 "},c.a.createElement("img",{src:"http://127.0.0.1/ems/ems-api/api/"+e.photo,className:"m-0 p-0",width:"100px",height:"100px",alt:e.admission_no,onError:function(e){e.target.onerror=null,e.target.src="/ems/avatars/1.png"}})),c.a.createElement("div",{className:"m-0 text-center",style:{zIndex:"1001",position:"relative",top:"0px",backgroundColor:"rgba(0,0,0,0)"}},c.a.createElement("span",{style:{textTransform:"capitalize",fontSize:"10px",color:"black",fontWeight:"bolder"}}," ",e.surname," ",e.firstname," ",e.middlename)))}));return c.a.createElement(c.a.Fragment,null,c.a.createElement(j.wb,{className:"d-flex flex-wrap justify-content-center"},t))},A=function(e){var t=(e.data&&Array.isArray(e.data)?e.data.filter((function(e){return null!=e||void 0!=e})):[]).map((function(e,t){return c.a.createElement("tr",{key:t,onClick:function(){return t=e.id,void window.open("/ems#/students/"+t);var t}},c.a.createElement("td",{className:"text-center"},c.a.createElement("div",{className:"c-avatar"},c.a.createElement("img",{src:"http://127.0.0.1/ems/ems-api/api/"+e.photo,className:"c-avatar-img",alt:e.admission_no,onError:function(e){e.target.onerror=null,e.target.src="/ems/avatars/1.png"}}),c.a.createElement("span",{className:"c-avatar-status ".concat("Male"===e.gender?"bg-success":"bg-danger")}))),c.a.createElement("td",null,c.a.createElement("div",null,c.a.createElement("strong",null,"".concat(e.surname," ").concat(e.firstname," ").concat(e.middlename))),c.a.createElement("div",{className:"small text-muted"},c.a.createElement("span",null,e.abbrv,e.admission_no))),c.a.createElement("td",null,c.a.createElement("div",{className:"small text-muted"},c.a.createElement("span",null,"Date of Birth"),": ",c.a.createElement("strong",null,v()(e.dob).format("Do MMM, YYYY"))),c.a.createElement("div",{className:"small text-muted"},c.a.createElement("span",null,"Age (Years)"),": ",c.a.createElement("strong",null,v()().diff(e.dob,"years")))),c.a.createElement("td",null,c.a.createElement("div",{className:"small text-muted ",style:{textTransform:"capitalize"}},e.soo),c.a.createElement("strong",{style:{textTransform:"capitalize"}},e.lga)),c.a.createElement("td",null,c.a.createElement("div",{className:"text-muted ",style:{textTransform:"capitalize"}},e.gender)))}));return c.a.createElement(c.a.Fragment,null,c.a.createElement("table",{className:"table table-hover table-outline mb-0 d-none d-sm-table"},c.a.createElement("thead",{className:"thead-light"},c.a.createElement("tr",null,c.a.createElement("th",{className:"text-center"},c.a.createElement(O.a,{name:"cil-people"})),c.a.createElement("th",null,"Studentclass"),c.a.createElement("th",{className:"text-center"},"Dates"),c.a.createElement("th",null,"Origin"),c.a.createElement("th",null,"Gender"))),c.a.createElement("tbody",null,t)))},_=a(738),w=a(754),F=a(705),I=a(749),C=Object(s.b)((function(e){return{user:e.userReducer,fees:e.feeReducer.fees,accounts:e.accountReducer.accounts,users:e.userReducer,staffs:e.staffReducer.staffall,studentfees:e.studentfeeReducer.studentfees,studentfee:e.studentfeeReducer.studentsinglefees}}),{registerStudentfee:_.f,updateStudentfee:_.h,getAccounts:w.c,getFees:I.c,getStudentfeesSingle:_.e,setStudentfee:_.g,getStudentfees:_.d,deleteStudentfee:_.a,getStaffAll:F.d,updateStudentclass:l.f})((function(e){var t=e.clasz,a=e.termid,s=e.sessionid,l=e.data1,u=Object(r.useState)(null),o=Object(n.a)(u,2),i=o[0],d=(o[1],Object(r.useState)(new Date)),p=Object(n.a)(d,2),f=p[0],y=p[1],b=Object(r.useState)(0),E=Object(n.a)(b,2),g=E[0],k=E[1],S=Object(r.useState)(null),N=Object(n.a)(S,2),x=N[0],A=N[1],_=Object(r.useState)(null),w=Object(n.a)(_,2),F=w[0],I=w[1],C=Object(r.useState)(null),z=Object(n.a)(C,2),D=z[0],R=z[1],Y=Object(r.useState)(null),P=Object(n.a)(Y,2),M=P[0],J=P[1],T=Object(r.useState)(),L=Object(n.a)(T,2),K=L[0],B=L[1];Object(r.useEffect)((function(){if(void 0!==e.users.activeschool&&e.users.activeschool.hasOwnProperty("id")&&parseInt(e.users.activeschool.id)>0){var t={data:JSON.stringify({sessionid:s,termid:a,ids:l}),cat:"studentfeess",table:"studentfeess",narration:"get student fees"};e.getStudentfees(t)}}),[e.users.activeschool,t,a,s,l]),Object(r.useEffect)((function(){var t={data:JSON.stringify({is_active:0,is_delete:0}),cat:"selected",table:"allstaffs",narration:"get all staff"};e.getStaffAll(t)}),[]),Object(r.useEffect)((function(){if(void 0!==e.user.activeschool&&e.user.activeschool.hasOwnProperty("id")&&parseInt(e.user.activeschool.id)>0){var t={data:JSON.stringify({is_active:0}),cat:"selected",table:"accounts",narration:"get accounts"};e.getAccounts(t);var a={data:JSON.stringify({is_active:0}),cat:"selected",table:"fees",narration:"get feess"};e.getFees(a)}}),[e.user.activeschool]),Object(r.useEffect)((function(){var t=e.data&&Array.isArray(e.data)?e.data.filter((function(e){return null!=e||void 0!=e})):[];B(t)}),[e.data]);var V=function(t){h()("Are you sure you want to delete you will not be able to restore the data.").then((function(a){if(1==a&&parseInt(t)>0){var n=new FormData;n.append("id",t),n.append("sessionid",s),n.append("cat","deletefee"),n.append("table","fees"),n.append("narration","delete students fees slready recorded"),e.deleteStudentfee(n,t)}else h()("Not deleted")}))},G=e.fees&&void 0!==e.fees&&Array.isArray(e.fees)?e.fees.filter((function(e){return null!==e&&void 0!==e})).map((function(e,t){return c.a.createElement("option",{key:t,value:e.id},e.name)})):"",U=e.staffs&&void 0!==e.staffs&&Array.isArray(e.staffs)?e.staffs.filter((function(e){return null!==e&&void 0!==e})).map((function(e,t){return c.a.createElement("option",{key:t,value:e.id},e.surname," ",void 0!==e.firstname&&e.firstname.length>0?e.firstname.substring(0,1):"",". ","(",e.schoolabbrv,")")})):"",W=e.accounts&&void 0!==e.accounts&&Array.isArray(e.accounts)?e.accounts.filter((function(e){return null!==e&&void 0!==e})).map((function(e,t){return c.a.createElement("option",{key:t,value:e.id},e.name)})):"",H=e.studentfees&&Array.isArray(e.studentfees)?e.studentfees.filter((function(e){return null!=e||void 0!=e})):[],q=Array.isArray(K)&&K.length>0?K.map((function(t,a){var n=[],r=[];return c.a.createElement("tr",{key:a},c.a.createElement("td",{className:"text-center"},a+1,c.a.createElement("div",{className:"c-avatar"},c.a.createElement("img",{src:"http://127.0.0.1/ems/ems-api/api/"+t.photo,className:"c-avatar-img",alt:t.admission_no,onError:function(e){e.target.onerror=null,e.target.src="/ems/avatars/1.png"}}),c.a.createElement("span",{className:"c-avatar-status ".concat("Male"===t.gender?"bg-success":"bg-danger")}))),c.a.createElement("td",null,c.a.createElement("div",null,c.a.createElement("strong",null,"".concat(t.surname," ").concat(t.firstname," ").concat(t.middlename))),c.a.createElement("div",{className:"small text-muted"},c.a.createElement("span",null,t.schoolabbrv,t.admission_no))),c.a.createElement("td",null,H.filter((function(e){return parseInt(e.studentid)===parseInt(t.id)&&1===parseInt(e.grp)})).map((function(t,a){return n.push(parseFloat(t.amount)),c.a.createElement("div",{key:a,className:"small text-muted"},e.classteacher&&new Date<new Date(new Date(t.date_created).setHours(new Date(t.date_created).getHours()+4e3))?c.a.createElement("span",{style:{cursor:"pointer"}},c.a.createElement(O.a,{name:"cil-trash",onClick:function(){return V(t.id)},className:"text-danger"})," "):"",c.a.createElement("span",null,t.feename),": ",c.a.createElement("strong",null,Object(m.u)(t.amount)))}))),c.a.createElement("td",null,0===parseInt(t.parentid)?"":c.a.createElement("b",null,c.a.createElement("i",null,"Recover from source",c.a.createElement("br",null),t.parentname)),H.filter((function(e){return parseInt(e.studentid)===parseInt(t.id)&&0===parseInt(e.grp)})).map((function(a,n){return r.push(parseFloat(a.amount)),c.a.createElement("div",{key:n,className:"small text-muted"},e.classteacher&&new Date<new Date(new Date(a.date_created).setHours(new Date(a.date_created).getHours()+4e3))&&0===parseInt(t.parentid)?c.a.createElement("span",{style:{cursor:"pointer"}},c.a.createElement(O.a,{name:"cil-trash",onClick:function(){return V(a.id)},className:"text-danger"})," "):"",c.a.createElement("span",null,v()().format(a.datepaid,"DD MM YYYY"))," : ",c.a.createElement("i",null,a.teller),": ",c.a.createElement("strong",null,Object(m.u)(a.amount)))}))),c.a.createElement("td",null,function(e,t){var a=e.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}),0)-t.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}),0);return a>0?c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"text-danger"},c.a.createElement("strong",null,Object(m.u)(a)))):c.a.createElement("span",{className:"text-info"},c.a.createElement("strong",null,Object(m.u)(-1*a)))}(n,r)),e.classteacher?c.a.createElement("td",{className:"text-center"},c.a.createElement(j.g,null,c.a.createElement(j.z,{className:"m-0"},c.a.createElement(j.E,{color:"secondary",size:"sm",block:!0},"Set Fees"),c.a.createElement(j.D,{className:"bg-info"},c.a.createElement(j.J,{className:"px-4 py-3"},c.a.createElement(j.K,null,c.a.createElement(j.cb,{htmlFor:"amount"},"Amount"),c.a.createElement(j.S,{className:"form-control",style:{color:"blue",fontWeight:"bolder"},id:"amount",type:"text",value:g,autoComplete:"amount",onChange:function(e){return k(e.target.value)}})),c.a.createElement(j.K,null,c.a.createElement(j.cb,{htmlFor:"feeid"},"Select Fee"),c.a.createElement(j.xb,{className:"form-control",id:"feeid",type:"date",value:F,autoComplete:"feeid",onChange:function(e){return I(e.target.value)}},c.a.createElement("option",null),G)),c.a.createElement(j.K,{className:"mt-2"},c.a.createElement(j.f,{className:"mb-2",size:"sm",block:!0,color:"primary",type:"button",onClick:function(){return function(t,a,n){var r=new FormData;r.append("studentid",t),r.append("amount",g),r.append("feeid",F),r.append("termid",a),r.append("claszid",e.claszparentid),r.append("sessionid",n),r.append("staffid",e.user.mid),r.append("cat","insertsetfees"),r.append("table","studentfeez"),e.setStudentfee(r)}(t.id,e.termid,e.sessionid)}},"Set Fee"),c.a.createElement(j.f,{block:!0,size:"sm",color:"secondary",onClick:function(){return function(t,a,n){var r=new FormData;r.append("studentid",t),r.append("termid",a),r.append("claszid",e.claszparentid),r.append("sessionid",n),r.append("staffid",e.user.mid),r.append("cat","insertsetfee"),r.append("table","studentfeez"),e.setStudentfee(r)}(t.id,e.termid,e.sessionid)}},"Use Default Fee"))))),0===parseInt(t.parentid)?c.a.createElement(j.z,{className:"m-0"},c.a.createElement(j.E,{color:"info",size:"sm"},"Pay Fees"),c.a.createElement(j.D,{className:"bg-info"},c.a.createElement(j.J,{className:"px-4 py-3"},c.a.createElement(j.K,null,c.a.createElement(j.cb,{htmlFor:"datepaid"},"Date Paid"),c.a.createElement(j.S,{className:"form-control",id:"datepaid",type:"date",value:f,autoComplete:"email",onChange:function(e){return y(e.target.value)}})),c.a.createElement(j.K,null,c.a.createElement(j.cb,{htmlFor:"amount"},"Amount"),c.a.createElement(j.S,{className:"form-control",style:{color:"blue",fontWeight:"bolder"},id:"amount",type:"text",value:g,autoComplete:"amount",onChange:function(e){return k(e.target.value)}})),c.a.createElement(j.K,null,c.a.createElement(j.cb,{htmlFor:"accountid"},"Account"),c.a.createElement(j.xb,{className:"form-control",id:"accountid",type:"date",value:x,autoComplete:"accountid",onChange:function(e){return A(e.target.value)}},c.a.createElement("option",null),W)),c.a.createElement(j.K,null,c.a.createElement(j.cb,{htmlFor:"teller"},"Teller"),c.a.createElement(j.S,{className:"form-control",id:"teller",type:"text",value:M,autoComplete:"teller",onChange:function(e){return J(e.target.value)}})),c.a.createElement(j.K,null,c.a.createElement(j.cb,{htmlFor:"feeid"},"fee"),c.a.createElement(j.xb,{className:"form-control",id:"feeid",type:"date",value:F,autoComplete:"feeid",onChange:function(e){return I(e.target.value)}},c.a.createElement("option",null),G)),c.a.createElement(j.K,{className:"mt-2"},c.a.createElement(j.f,{color:"primary",type:"button",onClick:function(){return function(t,a,n){var r=new FormData;r.append("studentid",t),r.append("amount",g),r.append("termid",a),r.append("teller",M),r.append("datepaid",v()(f).format("YYYY-MM-DD")),r.append("sessionid",n),r.append("schoolid",e.user.activeschool.id),r.append("staffid",e.user.mid),r.append("accountid",x),r.append("feeid",F),r.append("table","studentfees"),i&&parseInt(i)>0?(r.append("id",i),r.append("cat","updatefee"),r.append("narration","Fees Payment Update"),e.updateStudentfee(r)):(r.append("cat","insertfee"),r.append("narration","Fees Payment"),r.append("staffid",e.user.mid),e.registerStudentfee(r))}(t.id,e.termid,e.sessionid)}},"Pay"))))):""," "),c.a.createElement(j.z,{className:"m-0"},c.a.createElement(j.E,{color:"dark",size:"sm",block:!0},"Deduct from Source"),c.a.createElement(j.D,{className:"bg-dark"},c.a.createElement(j.J,{className:"px-4 py-3"},c.a.createElement(j.K,null,c.a.createElement(j.cb,{htmlFor:"staffid"},"Select Staff Name & School"),c.a.createElement(j.xb,{className:"form-control",id:"staffid",type:"date",value:D,autoComplete:"staffid",onChange:function(e){return R(e.target.value)}},c.a.createElement("option",null),U)),c.a.createElement(j.K,{className:"mt-2"},c.a.createElement(j.f,{className:"mb-2",size:"sm",block:!0,color:"primary",type:"button",onClick:function(){return function(t){var a=new FormData;a.append("parentid",D),a.append("id",t),a.append("cat","updatestudentclasss"),a.append("table","accessstudentclass"),a.append("sessionid",s),e.updateStudentclass(a)}(t.id)}},"Deduct From Source")))))):"")})):"";return c.a.createElement(c.a.Fragment,null,c.a.createElement("table",{className:"table  table-outline mb-0 "},c.a.createElement("thead",{className:"thead-light"},c.a.createElement("tr",null,c.a.createElement("th",{className:"text-center"},"Student ID"),c.a.createElement("th",null,"Studentclass"),c.a.createElement("th",{className:"text-center"},"FEES"),c.a.createElement("th",{className:"text-center"},"PAYMENTS"),c.a.createElement("th",{className:"text-center"},"BALANCE"),e.classteacher?c.a.createElement("th",{className:"text-center"},"Pay"):"")),c.a.createElement("tbody",null,q)))})),z=a(788),D=function(e){var t=(e||"").studentdata;return c.a.createElement(j.w,null,c.a.createElement(j.wb,null,c.a.createElement(j.u,{sm:6},c.a.createElement(z.a,{studentx:e.placeStudent})),c.a.createElement(j.u,{sm:6},t&&Object.keys(t).length>0?c.a.createElement(c.a.Fragment,null,c.a.createElement(j.wb,null,c.a.createElement("img",{src:"http://127.0.0.1/ems/ems-api/api/"+t.photo,style:{height:"30px",width:"30px"},height:"30px",alt:"profile-image",class:"profile",onError:function(e){e.target.onerror=null,e.target.src="/ems/icons/profile_1.png"}}),c.a.createElement(j.u,null,c.a.createElement("strong",null,t.name),c.a.createElement("br",null),c.a.createElement("small",null,t.admission_no)),c.a.createElement(j.u,{xs:3},c.a.createElement("button",{className:"btn btn-sm btn-success",onClick:e.loadStudent},c.a.createElement("i",{className:"fa fa-plus"})),c.a.createElement("button",{className:"btn btn-sm btn-danger",onClick:function(){return e.setStudentdata({})}},c.a.createElement("i",{className:"fa fa-trash"}))))):"")))},R=a(0),Y=a(777),P=a(725),M=m.t,J=Object(s.b)((function(e){return{studentattendance:e.studentattendanceReducer,user:e.userReducer,classstaff:e.classstaffReducer,staffsubject:e.staffsubjectReducer,dropdowns:e.userReducer.dropdowns}}),{getStudentattendances:Y.f,getStudentattendancedailys:Y.e,getStudentattendance:Y.c,registerStudentattendance:Y.g,registerStudentattendancedaily:Y.h,updateStudentattendance:Y.i,updateStudentattendancedaily:Y.j,deleteStudentattendance:Y.a,deleteStudentattendancedaily:Y.b,getStaffsubjects:P.c})((function(e){Object(y.g)();var t=Object(r.useState)(new Date),a=Object(n.a)(t,2),s=a[0],l=a[1],u=Object(r.useState)(""),o=Object(n.a)(u,2),i=o[0],d=o[1],m=Object(r.useState)(0),p=Object(n.a)(m,2),f=p[0],b=p[1],E=Object(r.useState)(""),h=Object(n.a)(E,2),g=h[0],k=(h[1],Object(r.useState)({})),S=Object(n.a)(k,2),N=S[0],x=S[1],A=Object(r.useState)(0),_=Object(n.a)(A,2),w=_[0],F=_[1],I=Object(r.useState)(0),C=Object(n.a)(I,2),z=C[0],D=C[1];Object(r.useEffect)((function(){var t={data:JSON.stringify({schoolid:e.user.activeschool.id,grp:2,dates:v()(s).format("YYYY-MM-DD")}),cat:"selected",table:"attendances",narration:"get all students"};e.getStudentattendances(t);var a={data:JSON.stringify({clients:e.clasz,schoolid:e.user.activeschool.id,grp:4,dates:v()(s).format("YYYY-MM-DD")}),cat:"selected",table:"attendances",narration:"get all attendance"};e.getStudentattendancedailys(a)}),[s,e.clasz,e.session,e.term]),Object(r.useEffect)((function(){if(void 0!==e.user.activeterm){var t={data:JSON.stringify({termid:e.user.activeterm.termid,sessionid:e.user.activeterm.sessionid,clientid:e.user.user.id,clasz:e.clasz,grp:2}),cat:"staffclass",table:"accessstaffsubjectnum1",narration:"get staffsubjects"};e.getStaffsubjects(t)}}),[e.user.activeterm,e.clasz]);var Y=function(e){return M.filter((function(t){return parseInt(t.id)===parseInt(e)}))[0]},P=function(e,t){if(Array.isArray(e)&&e.length){var a=e.filter((function(e){return parseInt(e.clients)===parseInt(t)})),n=Array.isArray(a)&&a.length>0?a[0].leaveid:0;return parseInt(n)}return 0},J=M.map((function(e,t){return c.a.createElement("option",{value:e.id},e.name)})),T=function(){var t=new FormData;t.append("grp",4),t.append("dates",v()(s).format("YYYY-MM-DD")),t.append("schoolid",e.user.activeschool.id),t.append("clients",e.clasz),t.append("reason",e.data1),t.append("leaveid",0),t.append("cat","insert"),t.append("table","attendances"),e.registerStudentattendancedaily(t)},L="";if(1===parseInt(w))L=Array.isArray(e.staffsubject.staffsubjects)?e.staffsubject.staffsubjects.filter((function(e){return null!==e&void 0!==e})).map((function(e,t){return c.a.createElement("option",{key:t,value:e.itemid1},"".concat(e.itemname1," ").concat(e.itemname," "))})):"";else if(2===parseInt(w)){var K=e.dropdowns&&Array.isArray(e.dropdowns)&&e.dropdowns.length>0?e.dropdowns:[[],[],[],[]];K.length>0&&(K[0].map((function(e,t){return c.a.createElement("option",{key:t,value:e.termid},e.name)})),L=K[1].map((function(e,t){return c.a.createElement("option",{key:t,value:e.id},e.name)})),K[2].map((function(e,t){return c.a.createElement("option",{key:t,value:e.id},e.name)})),K[0].map((function(e,t){return c.a.createElement("option",{key:t,value:JSON.stringify(e)},e.name)})))}var B=Array.isArray(e.studentattendance.studentattendancedailys)&&void 0!==e.studentattendance.studentattendancedailys?e.studentattendance.studentattendancedailys:[],V=Array.isArray(B)?B.filter((function(e){return void 0!==e&&null!==e&&e.dates===v()(s).format("YYYY-MM-DD")})):[],G=!!(Array.isArray(V)&&V.length>0),U=Array.isArray(e.studentattendance.studentattendances)&&void 0!==e.studentattendance.studentattendances?e.studentattendance.studentattendances:[],W=Array.isArray(U)?U.filter((function(e){return void 0!==e&&null!==e&&e.dates===v()(s).format("YYYY-MM-DD")})):[],H=e.classteacher,q=e.data.filter((function(e){return null!==e&&void 0!==e})).map((function(t,a){var n=void 0!==t.dupli&&null!==t.dupli&&t.dupli.length>0?t.dupli.split(","):null,r=null!==n?n.length:1;return c.a.createElement("tr",{key:a},c.a.createElement("td",{className:"text-center"},c.a.createElement("div",{className:"c-avatar"},c.a.createElement("img",{src:"http://127.0.0.1/ems/ems-api/api/"+t.photo,style:{width:"40px",height:"40px"},height:"50px",width:"50px",className:"c-avatar-img",alt:t.admission_no,onError:function(e){e.target.onerror=null,e.target.src="/ems/avatars/1.png"}}),c.a.createElement("span",{className:"c-avatar-status ".concat("Male"===t.gender?"bg-success":"bg-danger")}))),c.a.createElement("td",null,c.a.createElement("div",null,"".concat(t.surname," ").concat(t.firstname," ").concat(t.middlename)),c.a.createElement("div",{className:"small text-muted"},c.a.createElement("span",null,"".concat(t.abbrv,"/").concat(t.admission_no)))),c.a.createElement("td",{className:"text-center"},r>1?c.a.createElement(c.a.Fragment,null,c.a.createElement("strong",null,c.a.createElement("small",{style:{color:"red"}}," Error Duplicated ",t.dupli)),c.a.createElement("br",null)):"",P(W,t.id)>0?c.a.createElement(c.a.Fragment,null,c.a.createElement(j.b,{className:"mr-0",color:Y(P(W,t.id)).colors},Y(P(W,t.id)).name),c.a.createElement(j.b,{className:"mr-1",color:"dark"},v()(s).format("Do MMMM, YYYY"))):c.a.createElement(c.a.Fragment,null,c.a.createElement(j.b,{className:"mr-0",color:G?"success":"secondary"},G?"Present":"Present not saved"),c.a.createElement(j.b,{className:"mr-1",color:"dark"},v()(s).format("Do MMMM, YYYY")))),c.a.createElement("td",{className:"text-right"},c.a.createElement(j.g,null,c.a.createElement(j.Rb,{content:"Select"},c.a.createElement(j.Hb,{className:"my-auto mx-3",variant:"3d",color:"primary",checked:!(!Object.keys(N).includes(t.id)||!0!==N[t.id]),onChange:function(e){return function(e,t){var a=Object(R.a)({},N);a[t]=e,x(a)}(e.target.checked,t.id)}})),c.a.createElement(j.Rb,{content:"Student profile"},c.a.createElement(j.f,{size:"sm",color:"dark",onClick:function(){return a=t.id,n=e.session,void window.open("/ems#/studentcl/"+a+"/"+n);var a,n}}," ",c.a.createElement(O.a,{name:"cil-user"})," ",c.a.createElement("span",{className:"d-xs-none"},"Profile"))),c.a.createElement(j.f,{size:"sm",color:"secondary"}," ",c.a.createElement(O.a,{name:"cil-envelope-open"}),"  ",c.a.createElement("span",{className:"d-xs-none"},"Message")),H?c.a.createElement(c.a.Fragment,null,c.a.createElement(j.z,{className:"m-0"},c.a.createElement(j.E,{color:"info",size:"sm",disabled:!e.activeterm},c.a.createElement(O.a,{name:"cil-user-follow"}),"  ",c.a.createElement("span",{className:"d-xs-none"},"Attendance")),c.a.createElement(j.D,{className:"bg-info"},c.a.createElement(j.J,{className:"px-4 py-3"},c.a.createElement(j.K,null,c.a.createElement(j.cb,{htmlFor:"leaveid"}),c.a.createElement(j.xb,{className:"form-control",id:"leaveid",type:"date",value:f,autoComplete:"leaveid",onChange:function(e){return b(e.target.value)}},J)),c.a.createElement(j.K,null,c.a.createElement(j.cb,{htmlFor:"reason"},"Reason"),c.a.createElement(j.Lb,{className:"form-control",style:{color:"blue",fontWeight:"bolder"},id:"reason",type:"text",value:i,autoComplete:"reason",onChange:function(e){return d(e.target.value)}})),c.a.createElement(j.K,{className:"mt-2"},c.a.createElement(j.f,{color:"primary",type:"button",block:!0,onClick:function(){return function(t){var a=new FormData;a.append("grp",2),a.append("dates",v()(s).format("YYYY-MM-DD")),a.append("schoolid",e.user.activeschool.id),a.append("clients",t),a.append("leaveid",f),a.append("reason",i),a.append("cat","insert"),a.append("table","attendances"),e.registerStudentattendance(a)}(t.id)}},"Log"))))),c.a.createElement(j.Rb,{content:"Remove Student"},c.a.createElement("button",{disabled:!e.activeterm,onClick:function(){return e.onRemove(t.cid)},className:"btn btn-sm btn-round btn-danger "},c.a.createElement(O.a,{size:"md",name:"cil-x"})))):"")))}));return c.a.createElement(c.a.Fragment,null,c.a.createElement(j.wb,{className:"table-responsive"},c.a.createElement(j.wb,{className:" mt-2"},c.a.createElement(j.u,{xs:12,md:4},c.a.createElement(j.K,null,c.a.createElement(j.u,{xs:"12",md:"12"},c.a.createElement(j.S,{className:"my-auto",custom:!0,defaultValue:g,type:"search",onChange:function(t){return e.setsearch(t.target.value)},placeholder:"Search for student...."})))),c.a.createElement(j.u,{xs:12,md:4},c.a.createElement(j.K,null,c.a.createElement(j.u,{xs:12},c.a.createElement(j.S,{custom:!0,defaultValue:s,type:"date",onChange:function(t){return function(t){l(t),e.setDates(t)}(t.target.value)}})))),c.a.createElement(j.u,{xs:12,md:4},c.a.createElement(j.u,{xs:12},H?G?c.a.createElement(j.f,{color:"dark",disabled:!0,block:!0,onClick:T},"Attendance saved (",v()(s).format("DD MMM, YYYY"),")"):c.a.createElement(j.f,{disabled:!e.activeterm,color:"info",block:!0,onClick:T},"Save Attendance"):c.a.createElement(j.f,null,"No Permission to Edit")))),c.a.createElement(j.v,{show:Object.values(N).filter((function(e){return!0===e})).length>0},c.a.createElement(j.wb,{className:" mt-2"},c.a.createElement(j.u,{xs:12,md:4},c.a.createElement(j.K,null,c.a.createElement(j.u,{xs:"12",md:"12"},c.a.createElement(j.xb,{className:"my-auto",custom:!0,value:w,type:"search",onChange:function(e){return F(e.target.value)},placeholder:"Search for student...."},c.a.createElement("option",{value:"0"},"Select an action"),c.a.createElement("option",{value:"1"},"Send selected student to my subject"),c.a.createElement("option",{value:"2"},"Send selected student to a subject"),c.a.createElement("option",{value:"3"},"Move selected students to another class"),c.a.createElement("option",{value:"4"},"Remove selected students from class"),c.a.createElement("option",{value:"5"},"Send an email message to selected students"),c.a.createElement("option",{value:"6"},"Send an sms message to selected students"),c.a.createElement("option",{value:"7"},"Send a Whatsapp message to selected students"),c.a.createElement("option",{value:"8"}))))),c.a.createElement(j.u,{xs:12,md:4},c.a.createElement(j.K,null,parseInt(w)>0?c.a.createElement(j.u,{xs:"12",md:"12"},c.a.createElement(j.xb,{className:"my-auto",custom:!0,value:z,type:"search",onChange:function(e){return D(e.target.value)},placeholder:"Search for student...."},c.a.createElement("option",null),L)):"")),c.a.createElement(j.u,{xs:12,md:4},c.a.createElement(j.u,{xs:12},parseInt(z)>0&&parseInt(w)>0?c.a.createElement(j.f,{disabled:!e.activeterm,color:"info",block:!0,onClick:function(){1===parseInt(w)&&parseInt(w)>0&&e.placeStudentSubject(w),2===parseInt(w)&&parseInt(w)>0&&e.placeStudentSubject(w)}},"Submit "):c.a.createElement(j.f,null))))),c.a.createElement("table",{className:"table table-hover table-outline mb-0 d-sm-table"},c.a.createElement("thead",{className:"thead-light"},c.a.createElement("tr",null,c.a.createElement("th",{className:"text-center"},c.a.createElement(O.a,{name:"cil-people"})),c.a.createElement("th",null,"Student"),c.a.createElement("th",null,"Attendance"),c.a.createElement("th",null," .     . ",c.a.createElement(j.Rb,{content:"Select All"},c.a.createElement(j.Hb,{className:"my-auto mx-3",variant:"3d",color:"primary",onChange:function(t){return function(t){var a={};e.data.filter((function(e){return null!==e&&void 0!==e})).forEach((function(e){a[e.id]=t})),x(a)}(t.target.checked)}})),"Actions"))),c.a.createElement("tbody",null,q))))})),T=a(109),L=a(724),K=Object(s.b)((function(e){return{studentscore:e.studentscoreReducer.studentscoreca,staffsubjects:e.staffsubjectReducer.staffsubjects}}),{insertStudentca:L.f,deleteStudentca:L.a,getStudentscorecas:L.d,updateStaffsubject:P.f})((function(e){e.reportid,e.sessionid,e.students,e.claszname,e.claszparentname,e.classteacher;var t=e.subjectname,a=e.theadm,n=e.student_ca_score_array,r=function(e,t){return Number(e>0&&t>0?e/t:0).toFixed(1)},s=function(e){var t=void 0!==e?e.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}),0):"";return Number(t).toFixed(1)},l={},u=[],o=[],i=[],d={},p=e.studentscore&&Array.isArray(e.studentscore)?e.studentscore.filter((function(e){return null!=e||void 0!=e})):[],f={};p.forEach((function(e){Object.keys(f).includes(e.clientid)?Object.keys(f[e.clientid]).includes(e.itemid)?Object.keys(f[e.clientid][e.itemid]).includes(e.itemid1)||(f[e.clientid][e.itemid][e.itemid1]=e.contact):(f[e.clientid][e.itemid]={},f[e.clientid][e.itemid][e.itemid1]=e.contact):(f[e.clientid]={},f[e.clientid][e.itemid]={},f[e.clientid][e.itemid][e.itemid1]=e.contact)}));var y=e.data&&Array.isArray(e.data)?e.data.filter((function(e){return null!=e||void 0!=e})):[],b=[];y.forEach((function(e){var a=[],c=[];Object.keys(t).forEach((function(t){void 0!==n&&n.hasOwnProperty(e.id)&&n[e.id].hasOwnProperty(t)&&(a.push(s(n[e.id][t])),c.push(t))}));var l={};l.studentid=e.id,l.score=r(s(a),c.length),b.push(l)})),b.sort((function(e,t){return t.score-e.score})),b.forEach((function(e,t,a){e.rank=0===t||e.score!=a[t-1].score?t+1:a[t-1].rank}));var E={};b.forEach((function(e){E[e.studentid]=e.rank}));var h=y.map((function(e,a){var u=[],o=[];return c.a.createElement("tr",{key:a},c.a.createElement("td",{className:"text-center"},a+1),c.a.createElement("td",{className:"text-center"},e.admission_no),c.a.createElement("td",null,c.a.createElement("div",null,c.a.createElement("strong",null,"".concat(e.surname," ").concat(e.firstname," ").concat(e.middlename)))),Object.keys(t).map((function(t,a){return l.hasOwnProperty(t)||(l[t]=[]),void 0!==n&&n.hasOwnProperty(e.id)&&n[e.id].hasOwnProperty(t)&&(u.push(s(n[e.id][t])),o.push(t),l[t].push(s(n[e.id][t]))),c.a.createElement(c.a.Fragment,null,c.a.createElement("td",{className:"text-center",key:a},void 0!==n&&n.hasOwnProperty(e.id)&&n[e.id].hasOwnProperty(t)?s(n[e.id][t]):"-"))})),c.a.createElement("th",{className:"text-center"},o.length),c.a.createElement("th",{className:"text-center"},s(u)),c.a.createElement("th",{className:"text-center"},r(s(u),o.length)),c.a.createElement("th",{className:"text-center"},Object(m.v)(E[e.id])))})),g=Object.keys(t).filter((function(e){return null!==t[e]&&void 0!==t[e]&&t[e].length>0})).map((function(e,t){return c.a.createElement("td",{key:t,className:"text-center"},l.hasOwnProperty(e)?l[e].length:"-"," ")})),v=Object.keys(t).filter((function(e){return null!==t[e]&&void 0!==t[e]&&t[e].length>0})).map((function(e,t){return void 0!==l[e]&&Array.isArray(l[e])&&s(l[e])>0&&u.push(s(l[e])),c.a.createElement(c.a.Fragment,null," ",c.a.createElement("td",{key:t,className:"text-center",style:{fontSize:"11px",fontStyle:"italic",fontWeight:"bolder"}},void 0!==l[e]&&Array.isArray(l[e])&&s(l[e])>0?s(l[e]):""," "))})),O=Object.keys(t).filter((function(e){return null!==t[e]&&void 0!==t[e]&&t[e].length>0})).map((function(e,t){if(void 0!==l[e]&&Array.isArray(l[e])&&r(s(l[e]),l[e].length)>0){o.push(r(s(l[e]),l[e].length));var a={};a.subjectid=e,a.score=r(s(l[e]),l[e].length),i.push(a),d[e]=r(s(l[e]),l[e].length)}return c.a.createElement("td",{key:t,className:"text-center"},void 0!==l[e]&&Array.isArray(l[e])&&r(s(l[e]),l[e].length)>0?r(s(l[e]),l[e].length):"0"," ")}));i.sort((function(e,t){return t.score-e.score})),i.forEach((function(e,t,a){e.rank=0===t||e.score!=a[t-1].score?t+1:a[t-1].rank}));var k={};i.forEach((function(e){k[e.subjectid]=e.rank}));var S=Object.keys(t).filter((function(e){return null!==t[e]&&void 0!==t[e]&&t[e].length>0})).map((function(e,t){return c.a.createElement("td",{key:t,className:"text-center"},k.hasOwnProperty(e)?k[e]:"-"," ")}));return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"A4"},c.a.createElement("div",{className:"sheet padding-5mm"},c.a.createElement(j.wb,{className:"mb-5"},c.a.createElement(j.u,null,c.a.createElement("table",{width:"100%",border:"solid 3px teal ",style:{borderColor:"teal"}},c.a.createElement("thead",{className:"text-center"},c.a.createElement("tr",null,c.a.createElement("th",{rowSpan:2},"SN"),c.a.createElement("th",{rowSpan:2},"MATRIC"),c.a.createElement("th",{rowSpan:2},"FULLNAME"),a,c.a.createElement("th",{rowSpan:2},"NUM"),c.a.createElement("th",{rowSpan:2},"SUM"),c.a.createElement("th",{rowSpan:2},"AVG"),c.a.createElement("th",{rowSpan:2},"POS."))),h,c.a.createElement("tfoot",null,c.a.createElement("tr",null,c.a.createElement("td",null),c.a.createElement("td",null),c.a.createElement("td",null,"NUMBER"),g,c.a.createElement("td",null),c.a.createElement("td",null),c.a.createElement("td",null)),c.a.createElement("tr",null,c.a.createElement("td",null),c.a.createElement("td",null),c.a.createElement("td",null,"TOTAL"),v,c.a.createElement("td",null),c.a.createElement("td",{className:"text-center"},s(u)),c.a.createElement("td",{className:"text-center"},r(s(u),u.length))),c.a.createElement("tr",null,c.a.createElement("td",null),c.a.createElement("td",null),c.a.createElement("td",null,"AVERAGE"),O,c.a.createElement("td",null),c.a.createElement("td",{className:"text-center"},s(o)),c.a.createElement("td",{className:"text-center"},c.a.createElement("strong",null,r(s(o),o.length)))),c.a.createElement("tr",null,c.a.createElement("td",null),c.a.createElement("td",null),c.a.createElement("td",null,"RANK"),S,c.a.createElement("td",null),c.a.createElement("td",{className:"text-center"}),c.a.createElement("td",{className:"text-center"},c.a.createElement("strong",null))))))),c.a.createElement(j.wb,null,c.a.createElement(j.u,null,c.a.createElement("h4",null,"CLASS AVERAGE ",r(s(o),o.length)))))))})),B=function(e){var t=e.studentid,a=e.studentname,n=e.claszname,r=e.claszparentname,s=(e.classteacher,e.theadm),l=e.theadm1,u=e.caunit_array,o=e.ca_array,i=e.ca_score,d=e.arr,m=e.classparent_subject_average,p=e.class_subject_average,f=e.student_classparent_subject_position_store,y=e.student_class_subject_position_store,b=e.student_classparent_position_store,E=e.student_class_position_store,h=(e.student_ca_score_store,0),g=[],v=void 0!==b&&Array.isArray(b)&&b.length>0?b[0]:{rank:"-"},k=void 0!==E&&Array.isArray(E)&&E.length>0?E[0]:{rank:"-"},S=function(e,t){var a=e.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}),0),n=t.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}),0);return Number(a>0&&n>0?a/n*100:0).toFixed(1)},N={},x={},A={};Object.keys(f).forEach((function(e){var a=f[e].filter((function(e){return parseInt(e.studentid)===parseInt(t)}))[0];void 0!==a&&(N[e]=a.rank,x[e]=a.score,A[e]=a.average)}));var _={},w={},F={};Object.keys(y).forEach((function(e){var a=y[e].filter((function(e){return parseInt(e.studentid)===parseInt(t)}))[0];void 0!==a&&(_[e]=a.rank,w[e]=a.score,F[e]=a.average)}));var I=e.data&&Array.isArray(Object.keys(e.data))?e.data:[],C=Object.keys(I).map((function(t,a){if(d&&Array.isArray(Object.keys(d))&&Object.keys(d).includes(t)&&void 0!==d[t]){var n=[],r=[];return h+=1,c.a.createElement("tr",{key:a},c.a.createElement("td",{className:"text-center"},a+1),c.a.createElement("td",null,c.a.createElement("div",null,c.a.createElement("strong",{style:{textTransform:"capitalize"}},I[t]))),Object.keys(o).map((function(e,a){var s=[],l=[];return c.a.createElement(c.a.Fragment,null,Object.keys(u[e]).map((function(a,o){if(d&&Array.isArray(Object.keys(d))&&Object.keys(d).includes(t)&&Object.keys(d[t]).includes(u[e][a].id)){var i=d[t][u[e][a].id],m=u[e][a].score;return s.push(i),l.push(m),n.push(i),r.push(m),c.a.createElement("td",{className:"text-center",key:o},Number(i).toFixed(1))}return c.a.createElement("td",{className:"text-danger text-center"},c.a.createElement(O.a,{name:"cil-x"}))})),c.a.createElement("th",{className:"text-center"},function(e,t,a){var n=e.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}),0),r=t.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}),0),c=n>0&&r>0?n/r*i[a]:0;return Number(c).toFixed(1)}(s,l,e)))})),c.a.createElement("th",{className:"text-center"},S(n,r),g.push(S(n,r))),c.a.createElement("th",{className:"text-center"},p.hasOwnProperty(t)&&e.class_subject_average[t].hasOwnProperty("average")?Number(e.class_subject_average[t].average).toFixed(1):"0"),c.a.createElement("th",{className:"text-center"},m.hasOwnProperty(t)&&e.classparent_subject_average[t].hasOwnProperty("average")?Number(e.classparent_subject_average[t].average).toFixed(1):"0"),c.a.createElement("th",{className:"text-center"},_[t]," of ",p.hasOwnProperty(t)&&p[t].hasOwnProperty("pop")?p[t].pop:"-"),c.a.createElement("th",{className:"text-center"},N[t]," of ",m.hasOwnProperty(t)&&m[t].hasOwnProperty("pop")?m[t].pop:""," "))}}));return c.a.createElement(c.a.Fragment,null,c.a.createElement(j.Jb,null,c.a.createElement(j.wb,{className:"mb-5"},c.a.createElement(j.u,{xs:9},c.a.createElement("h3",{style:{textTransform:"capitalize"}},"".concat(a.surname," ").concat(a.firstname," ").concat(a.middlename)),c.a.createElement("h5",null,a.abbrv,a.admission_no),c.a.createElement("h6",null,"".concat(v.rank," of ").concat(n," ")),c.a.createElement("h6",null,"".concat(k.rank," of  ").concat(r," "))),c.a.createElement(j.u,{xs:3},c.a.createElement("div",{className:"c-avata"},c.a.createElement("img",{src:"http://127.0.0.1/ems/ems-api/api/"+a.photo,className:"c-",style:{width:"120px"},alt:a.admission_no,onError:function(e){e.target.onerror=null,e.target.src="/ems/avatars/1.png"}}),c.a.createElement("span",{className:"c-avatar-status ".concat("Male"===a.gender?"bg-success":"bg-danger")}))),c.a.createElement(j.u,{xs:"12",className:"printpages"},c.a.createElement("table",{width:"100%",border:"solid 3px teal ",style:{borderColor:"teal"}},c.a.createElement("thead",{className:"text-center"},c.a.createElement("tr",null,c.a.createElement("th",{rowSpan:2},"SN"),c.a.createElement("th",{rowSpan:2},"FULLNAME"),s,c.a.createElement("th",{rowSpan:2},"TOTAL",c.a.createElement("br",null)," (100%)"),c.a.createElement("th",{rowSpan:2},"AVG",c.a.createElement("br",null)," ARM"),c.a.createElement("th",{rowSpan:2},"AVG",c.a.createElement("br",null)," CLASS"),c.a.createElement("th",{rowSpan:2},"RANK",c.a.createElement("br",null)," ARM"),c.a.createElement("th",{rowSpan:2},"RANK",c.a.createElement("br",null)," CLASS")),c.a.createElement("tr",null,l)),C)),c.a.createElement(j.u,{xs:"12"},c.a.createElement("table",{width:"100%"},c.a.createElement("tr",null,c.a.createElement("th",{className:"text-right",width:"15%"},c.a.createElement("strong",null,"TOTAL SCORE")),c.a.createElement("td",{width:"15%",style:{fontFamily:"tahoma",fontStyle:"italic",paddingLeft:"9px"}},function(e){var t=e.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}),0);return Number(t).toFixed(1)}(g)),c.a.createElement("th",{className:"text-right",width:"15%"},c.a.createElement("strong",null,"".concat(n," AVERAGE"))),c.a.createElement("td",{width:"15%",style:{fontFamily:"tahoma",fontStyle:"italic",paddingLeft:"9px"}},Number(v.average).toFixed(1)),c.a.createElement("th",{className:"text-right",width:"15%"},c.a.createElement("strong",null,"TOTAL FEES")),c.a.createElement("td",{width:"15%",style:{fontFamily:"tahoma",fontStyle:"italic",paddingLeft:"9px"}})),c.a.createElement("tr",null,c.a.createElement("th",{className:"text-right"},c.a.createElement("strong",null,"SUBJECTS RECORDED")),c.a.createElement("td",{style:{fontFamily:"tahoma",fontStyle:"italic",paddingLeft:"9px"}},h),c.a.createElement("th",{className:"text-right",width:"15%"},c.a.createElement("strong",null,"".concat(r," AVERAGE"))),c.a.createElement("td",{width:"15%",style:{fontFamily:"tahoma",fontStyle:"italic",paddingLeft:"9px"}},Number(k.average).toFixed(1)),c.a.createElement("th",{className:"text-right"},c.a.createElement("strong",null,"TOTAL PAIDS")),c.a.createElement("td",{style:{fontFamily:"tahoma",fontStyle:"italic",paddingLeft:"9px"}})),c.a.createElement("tr",null,c.a.createElement("th",{className:"text-right"},c.a.createElement("strong",null,"STUDENT AVERAGE ")),c.a.createElement("td",{style:{fontFamily:"tahoma",fontStyle:"italic",paddingLeft:"9px"}},function(e,t){var a=e.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}),0);return Number(a>0&&t>0?a/t:0).toFixed(1)}(g,h)),c.a.createElement("th",{className:"text-right",width:"15%"},c.a.createElement("strong",null,"CLASS AVERAGE")),c.a.createElement("td",{width:"15%",style:{fontFamily:"tahoma",fontStyle:"italic",paddingLeft:"9px"}},"12"),c.a.createElement("th",{className:"text-right"},c.a.createElement("strong",null,"BALANCE")),c.a.createElement("td",{style:{fontFamily:"tahoma",fontStyle:"italic",paddingLeft:"9px"}})))))))},V=a(735),G=a(714),U=Object(s.b)((function(e){return{user:e.userReducer,reports:e.reportReducer.reports,studentscores:e.studentscoreReducer.studentscores,cas:e.caReducer.cas}}),{getReports:V.c,getStudentscores:L.e,getCas:G.c})((function(e){var t=Object(y.g)(),a=e.data1,s=e.data,l=e.term,u=e.session,o=e.classteacher,i=e.clasz,d=e.claszname,m=e.claszparent,p=e.claszparentname,f=(e.activeterm,e.user.mid,Object(r.useState)(0)),b=Object(n.a)(f,2),E=b[0],h=b[1],g=Object(r.useState)(0),v=Object(n.a)(g,2),O=v[0];v[1];Object(r.useEffect)((function(){var t={data:JSON.stringify({sessionid:u}),cat:"selected",table:"reports",narration:"get reports"};e.getReports(t);var a={data:JSON.stringify({termid:l,schoolid:u}),cat:"dropdownca",table:"dropdownca",narration:"get ca"};e.getCas(a)}),[u]),Object(r.useEffect)((function(){var t=(e.reports&&Array.isArray(e.reports)?e.reports:[]).filter((function(e){return null!==e&&parseInt(e.id)===parseInt(E)})),n=Array.isArray(t)&&t.length>0?t[0].ca:"",r=n.length>0?n:"";if(parseInt(E)>0){var c={data:JSON.stringify({sessionid:u,termid:l,ids:a,clasz:i,claszparent:m,cas:r}),cat:"selectreport",table:"studentscore",narration:"get reports"};e.getStudentscores(c)}var s={data:JSON.stringify({cas:r,schoolid:1}),cat:"dropdownca1",table:"dropdownca",narration:"get cas"};e.getCas(s)}),[E,a,m,i]);var k=e.studentscores&&Array.isArray(e.studentscores[0])?e.studentscores[0]:[],S={},N={},x={};k.forEach((function(e){Object.keys(S).includes(e.subjectid)?Object.keys(S[e.subjectid]).includes(e.studentid)?Object.keys(S[e.subjectid][e.studentid]).includes(e.caid)||(S[e.subjectid][e.studentid][e.caid]=e.score):(S[e.subjectid][e.studentid]={},S[e.subjectid][e.studentid][e.caid]=e.score):(S[e.subjectid]={},S[e.subjectid][e.studentid]={},S[e.subjectid][e.studentid][e.caid]=e.score),Object.keys(N).includes(e.studentid)?Object.keys(N[e.studentid]).includes(e.subjectid)?Object.keys(N[e.studentid][e.subjectid]).includes(e.caid)||(N[e.studentid][e.subjectid][e.caid]=e.score):(N[e.studentid][e.subjectid]={},N[e.studentid][e.subjectid][e.caid]=e.score):(N[e.studentid]={},N[e.studentid][e.subjectid]={},N[e.studentid][e.subjectid][e.caid]=e.score),x[e.subjectid]=e.subjectabbrv}));var A=e.studentscores&&Array.isArray(e.studentscores[1])?e.studentscores[1]:[],_={};A.forEach((function(e){var t={};t.pop=e.students,t.average=e.avgr,t.maxscore=e.maxscore,t.score=e.score,_[e.subjectid]=t}));var w=e.studentscores&&Array.isArray(e.studentscores[2])?e.studentscores[2]:[],F={};w.forEach((function(e){var t={};t.pop=e.students,t.average=e.avgr,t.maxscore=e.maxscore,t.score=e.score,F[e.subjectid]=t}));var I=e.studentscores&&Array.isArray(e.studentscores[4])?e.studentscores[4]:[],C={},z=[];I.forEach((function(e){if(Object.keys(C).includes(e.studentid))if(Object.keys(C[e.studentid]).includes(e.subjectid));else{var t={};t.score=parseFloat(e.avgr),C[e.studentid][e.subjectid]=t;var a={};a.score=parseFloat(e.avgr),a.studentid=e.studentid,a.subjectid=e.subjectid,z.push(a)}else{var n={};n.score=e.avgr,C[e.studentid]={},C[e.studentid][e.subjectid]=n;var r={};r.score=e.avgr,r.studentid=e.studentid,r.subjectid=e.subjectid,z.push(r)}}));var D=e.studentscores&&Array.isArray(e.studentscores[5])?e.studentscores[5]:[],R={},Y=[];D.forEach((function(e){if(Object.keys(R).includes(e.studentid))if(Object.keys(R[e.studentid]).includes(e.subjectid));else{var t={};t.score=parseFloat(e.avgr),R[e.studentid][e.subjectid]=t;var a={};a.score=parseFloat(e.avgr),a.studentid=e.studentid,a.subjectid=e.subjectid,Y.push(a)}else{var n={};n.score=parseFloat(e.avgr),R[e.studentid]={},R[e.studentid][e.subjectid]=n;var r={};r.score=parseFloat(e.avgr),r.studentid=e.studentid,r.subjectid=e.subjectid,Y.push(r)}}));var P=e.studentscores&&Array.isArray(e.studentscores[6])?e.studentscores[6]:[],M=[];P.forEach((function(e){var t={};t.average=parseFloat(e.avg),t.score=e.total,t.subjectid=e.nums,t.studentid=e.studentid,M.push(t)}));var J=e.studentscores&&Array.isArray(e.studentscores[7])?e.studentscores[7]:[],L=[];J.forEach((function(e){var t={};t.average=parseFloat(e.avgr),t.score=e.total,t.subjectid=e.nums,t.studentid=e.studentid,L.push(t)}));var B=e.studentscores&&Array.isArray(e.studentscores[8])?e.studentscores[8]:[],V={},G=[];B.forEach((function(e){Object.keys(V).includes(e.studentid)?Object.keys(V[e.studentid]).includes(e.subjectid)?Object.keys(V[e.studentid][e.subjectid]).includes(e.caid)||(V[e.studentid][e.subjectid][e.caid]=e.score,G[e.studentid][e.subjectid].push(e.score)):(V[e.studentid][e.subjectid]={},V[e.studentid][e.subjectid][e.caid]=e.score,G[e.studentid][e.subjectid]=[],G[e.studentid][e.subjectid].push(e.score)):(V[e.studentid]={},V[e.studentid][e.subjectid]={},V[e.studentid][e.subjectid][e.caid]=e.score,G[e.studentid]={},G[e.studentid][e.subjectid]=[],G[e.studentid][e.subjectid].push(e.score))}));var U=e.reports&&Array.isArray(e.reports)?e.reports:[],W=U.filter((function(e){return null!==e})).map((function(e,t){return c.a.createElement("option",{key:t,value:e.id},e.title)})),H={};Object.keys(x).forEach((function(e){var t=Y.filter((function(t){return parseInt(t.subjectid)===parseInt(e)}));t.sort((function(e,t){return t.score-e.score})),t.forEach((function(e,t,a){e.rank=0===t||e.score!=a[t-1].score?t+1:a[t-1].rank})),H[e]=t}));var q={};Object.keys(x).forEach((function(e){var t=z.filter((function(t){return parseInt(t.subjectid)===parseInt(e)}));t.sort((function(e,t){return t.score-e.score})),t.forEach((function(e,t,a){e.rank=0===t||e.score!=a[t-1].score?t+1:a[t-1].rank})),q[e]=t}));var X={};s.forEach((function(e){var t=e.id,a=M.filter((function(e){return parseInt(e.studentid)===parseInt(t)}));a.sort((function(e,t){return t.score-e.score})),a.forEach((function(e,t,a){e.rank=0===t||e.score!=a[t-1].score?t+1:a[t-1].rank})),X[t]=a}));var Q={};s.forEach((function(e){var t=e.id,a=L.filter((function(e){return parseInt(e.studentid)===parseInt(t)}));a.sort((function(e,t){return t.score-e.score})),a.forEach((function(e,t,a){e.rank=0===t||e.score!=a[t-1].score?t+1:a[t-1].rank})),Q[t]=a}));var Z=Array.isArray(e.cas)?e.cas:[],$={},ee={},te={},ae={},ne={};Z.forEach((function(e){if(1===parseInt(e.typeid)?Object.keys($).includes(e.sid)||($[e.sid]=e.caabbrv,ee[e.sid]=e.score):2===parseInt(e.typeid)?Object.keys($).includes(e.sid)||(te[e.sid]=e.caabbrv):3===parseInt(e.typeid)&&(Object.keys($).includes(e.sid)||(ae[e.sid]=e.caabbrv)),Object.keys(ne).includes(e.sid)){var t={};t.id=e.id,t.typeid=e.typeid,t.name=e.abbrv,t.score=e.maxscore,ne[e.sid].push(t)}else{ne[e.sid]=[];var a={};a.id=e.id,a.typeid=e.typeid,a.name=e.abbrv,a.score=e.maxscore,ne[e.sid].push(a)}}));var re=Object.keys(x).filter((function(e){return null!==x[e]&&void 0!==x[e]&&x[e].length>0})).map((function(e,t){return c.a.createElement("td",{key:t},x[e]," ",O===t)})),ce=c.a.createElement(K,{students:a,reportid:E,sessionid:u,classteacher:o,claszname:d,claszparent:m,claszparentname:p,subjectname:x,theadm:re,data:s,ca_array:$,ca_score:ee,caunit_array:ne,arr:S,classparent_subject_average:_,class_subject_average:F,student_classparent_subject_position_store:q,student_class_subject_position_store:H,student_classparent_position_store:X,student_class_position_store:Q,student_ca_score_store:V,student_ca_score_array:G});return c.a.createElement(c.a.Fragment,null,c.a.createElement(j.wb,{xs:12,className:"d-print-none"},c.a.createElement(j.u,{xs:12,md:4},c.a.createElement(j.K,null,c.a.createElement(j.u,{xs:"12",md:"12"},c.a.createElement(j.xb,{className:"my-auto",custom:!0,value:E,type:"search",onChange:function(e){return h(e.target.value)},placeholder:"Select a Report"},c.a.createElement("option",null,"Select an action"),W)))),c.a.createElement(j.u,{xs:12,md:4},c.a.createElement(j.u,{xs:12},c.a.createElement(j.f,{color:"info",block:!0},"Submit "))),c.a.createElement(j.u,{xs:12,md:4},c.a.createElement(j.f,{onClick:function(){var a;return t.push({pathname:"/results/".concat(E,"/1"),state:(a={report:parseInt(E)>0?U.filter((function(e){return parseInt(e.id)===parseInt(E)}))[0]:{},studentids:e.data1,students:e.data,sessionid:u,termid:e.term},Object(T.a)(a,"sessionid",e.session),Object(T.a)(a,"classteacher",e.classteacher),Object(T.a)(a,"clasz",e.clasz),Object(T.a)(a,"claszparent",e.claszparent),Object(T.a)(a,"activeterm",e.activeterm),Object(T.a)(a,"staffid",e.user.mid),Object(T.a)(a,"cas",e.cas),a)})},color:"success",block:!0},"Report Card "))),ce)})),W=Object(s.b)((function(e){return{studentscore:e.studentscoreReducer.studentscoreca,staffsubjects:e.staffsubjectReducer.staffsubjects}}),{insertStudentca:L.f,deleteStudentca:L.a,getStudentscorecas:L.d,updateStaffsubject:P.f})((function(e){var t=e.subjectid,a=e.reportid,n=e.sessionid,s=e.students,l=e.claszname,u=e.claszparentname,o=e.classteacher,i=e.subjectname,d=e.theadm,m=e.theadm1,p=e.caunit_array,f=e.ca_array,y=e.ca_score,b=e.arr,E=e.classparent_subject_average,h=e.class_subject_average,g=e.student_classparent_subject_position_store,v=e.student_class_subject_position_store,k=(e.student_classparent_position_store,e.student_class_position_store,e.student_ca_score_store,{});Object(r.useEffect)((function(){var r={data:JSON.stringify({sessionid:n,reportid:a,itemid:t,idx:s,grp:11}),cat:"studentca",table:"accessstudentcas",narration:"get ca scores"};e.getStudentscorecas(r)}),[n,a,t,s]);var S={},N={},x={};g.forEach((function(e){S[e.studentid]=e.rank,N[e.studentid]=e.score,x[e.studentid]=e.average}));var A={},_={},w={};v.forEach((function(e){A[e.studentid]=e.rank,_[e.studentid]=e.score,w[e.studentid]=e.average}));var F=e.studentscore&&Array.isArray(e.studentscore)?e.studentscore.filter((function(e){return null!=e||void 0!=e})):[],I={};F.forEach((function(e){Object.keys(I).includes(e.clientid)?Object.keys(I[e.clientid]).includes(e.itemid)?Object.keys(I[e.clientid][e.itemid]).includes(e.itemid1)||(I[e.clientid][e.itemid][e.itemid1]=e.contact):(I[e.clientid][e.itemid]={},I[e.clientid][e.itemid][e.itemid1]=e.contact):(I[e.clientid]={},I[e.clientid][e.itemid]={},I[e.clientid][e.itemid][e.itemid1]=e.contact)}));var C=e.data&&Array.isArray(e.data)?e.data.filter((function(e){return null!=e||void 0!=e})):[],z=C.map((function(e,a){var n=[],r=[];return c.a.createElement("tr",{key:a},c.a.createElement("td",{className:"text-center"},a+1),c.a.createElement("td",null,c.a.createElement("div",null,c.a.createElement("strong",null,"".concat(e.surname," ").concat(e.firstname," ").concat(e.middlename)))),Object.keys(f).map((function(a,s){var l=[],u=[];return c.a.createElement(c.a.Fragment,null,Object.keys(p[a]).map((function(t,s){if(Object.keys(b).includes(e.id)&&Object.keys(b[e.id]).includes(p[a][t].id)){var o=b[e.id][p[a][t].id],i=p[a][t].score;return l.push(o),u.push(i),n.push(o),r.push(i),c.a.createElement("td",{className:"text-center",key:s},Number(o).toFixed(1))}return c.a.createElement("td",{className:"text-danger text-center"},c.a.createElement(O.a,{name:"cil-x"}))})),c.a.createElement("th",{className:"text-center"},function(e,a,n,r,s,l){var u=Array.isArray(Object.keys(r))&&Object.keys(r).includes(s)&&Array.isArray(Object.keys(r[s]))&&Object.keys(r[s]).includes(t)&&Array.isArray(Object.keys(r[s][t]))&&Object.keys(r[s][t]).includes(l)?r[s][t][l]:"0",o=e.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}),0),i=a.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}),0),d=o>0&&i>0?o/i*y[n]:0;return Number(d).toFixed(1)==parseFloat(u)?c.a.createElement("font",{style:{color:"blue"}},Number(d).toFixed(1)):c.a.createElement("font",{style:{color:"red"}},Number(d).toFixed(1))}(l,u,a,I,e.id,a)))})),c.a.createElement("th",{className:"text-center"},function(e,t){var a=e.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}),0),n=t.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}),0);return Number(a>0&&n>0?a/n*100:0).toFixed(1)}(n,r)),c.a.createElement("th",{className:"text-center"},A[e.id]," of ",Object.keys(v).length," "),c.a.createElement("th",{className:"text-center"},S[e.id]," of ",Object.keys(g).length))}));return C.forEach((function(e){Object.keys(b).includes(e.id)&&Object.keys(b[e.id]).length>0&&(k[e.id]={},Object.keys(f).map((function(t,a){var n=[],r=[];Object.keys(p[t]).map((function(a,c){if(Object.keys(b).includes(e.id)&&Object.keys(b[e.id]).includes(p[t][a].id)){var s=b[e.id][p[t][a].id],l=p[t][a].score;n.push(s),r.push(l)}})),k[e.id][t]=function(e,t,a){var n=e.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}),0),r=t.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}),0),c=n>0&&r>0?n/r*y[a]:0;return Number(c).toFixed(1)}(n,r,t)})))})),c.a.createElement(c.a.Fragment,null,c.a.createElement(j.Jb,null,c.a.createElement("div",{className:"A4"},c.a.createElement("div",{className:"sheet padding-5mm"},c.a.createElement(j.wb,{className:"mb-5"},c.a.createElement(j.u,{xs:12},c.a.createElement("h3",null,i),c.a.createElement("h5",null,l," Subject Average : ",void 0!==h&&h.hasOwnProperty("average")?Number(h.average).toFixed(1):""),c.a.createElement("h5",null,l," Population : ",void 0!==h&&h.hasOwnProperty("average")?Number(h.pop).toFixed(0):""),c.a.createElement("h5",null,u," Subject Average : ",void 0!==E&&E.hasOwnProperty("average")?Number(E.average).toFixed(1):""),c.a.createElement("h5",null,u," Population : ",void 0!==E&&E.hasOwnProperty("average")?Number(E.pop).toFixed(0):"")),c.a.createElement(j.u,null,c.a.createElement("table",{width:"100%",border:"solid 3px teal ",style:{borderColor:"teal"}},c.a.createElement("thead",{className:"text-center"},c.a.createElement("tr",null,c.a.createElement("th",{rowSpan:2},"SN"),c.a.createElement("th",{rowSpan:2},"FULLNAME"),d,c.a.createElement("th",{rowSpan:2},"TOTAL",c.a.createElement("br",null)," (100%)"),c.a.createElement("th",{rowSpan:2},"RANK",c.a.createElement("br",null)," ARM"),c.a.createElement("th",{rowSpan:2},"RANK",c.a.createElement("br",null)," CLASS")),c.a.createElement("tr",null,m)),z)),o?c.a.createElement(j.u,{xs:"12",className:"mt-5 pt-10 d-print-none"},c.a.createElement(j.wb,null,c.a.createElement(j.u,{xs:"4"},c.a.createElement(j.f,{block:!0,color:"info",onClick:function(){return function(r){var c=new FormData;c.append("subjectid",t),c.append("reportid",a),c.append("sessionid",n),c.append("data",JSON.stringify(r)),c.append("cat","saveca"),c.append("table","saveca"),e.insertStudentca(c)}(k)}},c.a.createElement("i",{className:"fa fa-lock"})," "," Save and Lock")),c.a.createElement(j.u,{xs:"4"},c.a.createElement(j.f,{block:!0,color:"secondary",onClick:function(){}},c.a.createElement("i",{className:"fa fa-unlock"})," ","Open for Editing")),c.a.createElement(j.u,{xs:"4"},c.a.createElement(j.f,{block:!0,color:"danger",onClick:function(){return function(r){var c=new FormData;c.append("subjectid",t),c.append("reportid",a),c.append("sessionid",n),c.append("data",JSON.stringify(r)),c.append("cat","savecadelete"),c.append("table","savecadelete"),e.deleteStudentca(c)}(k)}},"Clear All Record")))):"")))))})),H=a(765),q=Object(s.b)((function(e){return{user:e.userReducer,reports:e.reportReducer.reports,studentscores:e.studentscoreReducer.studentscores,cas:e.caReducer.cas,gradeunits:e.gradeunitReducer}}),{getReports:V.c,getStudentscores:L.e,getCas:G.c,getGradeunits:H.c})((function(e){var t=Object(y.g)(),a=e.data1,s=e.data,l=e.term,u=e.session,o=e.classteacher,i=e.clasz,d=e.claszname,m=e.claszparent,p=e.claszparentname,f=(e.activeterm,e.user.mid,Object(r.useState)(0)),b=Object(n.a)(f,2),E=b[0],h=b[1],g=Object(r.useState)(0),v=Object(n.a)(g,2),O=v[0],k=v[1];Object(r.useEffect)((function(){var t={data:JSON.stringify({sessionid:u}),cat:"selected",table:"reports",narration:"get reports"};e.getReports(t);var a={data:JSON.stringify({termid:l,schoolid:u}),cat:"dropdownca",table:"dropdownca",narration:"get ca"};e.getCas(a)}),[u]),Object(r.useEffect)((function(){var t=(e.reports&&Array.isArray(e.reports)?e.reports:[]).filter((function(e){return null!==e&&parseInt(e.id)===parseInt(E)})),n=Array.isArray(t)&&t.length>0?t[0].ca:"",r=n.length>0?n:"",c=Array.isArray(t)&&t.length>0?t[0].gradeid:"";if(parseInt(E)>0){var s={data:JSON.stringify({sessionid:u,reportid:E,termid:l,ids:a,clasz:i,claszparent:m,cas:r}),cat:"selectreport",table:"studentscore",narration:"get reports"};e.getStudentscores(s)}var o={data:JSON.stringify({cas:r,schoolid:1}),cat:"dropdownca1",table:"dropdownca",narration:"get cas"};e.getCas(o);var d={data:JSON.stringify({gradeid:c,is_active:0}),cat:"selected",table:"gradeunits",narration:"get cas"};e.getGradeunits(d)}),[E,a,m,i]);var S=e.studentscores&&Array.isArray(e.studentscores[0])?e.studentscores[0]:[],N={},x={},A={};S.forEach((function(e){parseInt(e.subjectid)>-1&&(Object.keys(N).includes(e.subjectid)?Object.keys(N[e.subjectid]).includes(e.studentid)?Object.keys(N[e.subjectid][e.studentid]).includes(e.caid)||(N[e.subjectid][e.studentid][e.caid]=e.score):(N[e.subjectid][e.studentid]={},N[e.subjectid][e.studentid][e.caid]=e.score):(N[e.subjectid]={},N[e.subjectid][e.studentid]={},N[e.subjectid][e.studentid][e.caid]=e.score),Object.keys(x).includes(e.studentid)?Object.keys(x[e.studentid]).includes(e.subjectid)?Object.keys(x[e.studentid][e.subjectid]).includes(e.caid)||(x[e.studentid][e.subjectid][e.caid]=e.score):(x[e.studentid][e.subjectid]={},x[e.studentid][e.subjectid][e.caid]=e.score):(x[e.studentid]={},x[e.studentid][e.subjectid]={},x[e.studentid][e.subjectid][e.caid]=e.score),A[e.subjectid]=e.subjectname)}));var _=e.studentscores&&Array.isArray(e.studentscores[1])?e.studentscores[1]:[],w={};_.forEach((function(e){var t={};t.pop=e.students,t.average=e.avgr,t.maxscore=e.maxscore,t.score=e.score,w[e.subjectid]=t}));var F=e.studentscores&&Array.isArray(e.studentscores[2])?e.studentscores[2]:[],I={};F.forEach((function(e){var t={};t.pop=e.students,t.average=e.avgr,t.maxscore=e.maxscore,t.score=e.score,I[e.subjectid]=t}));var C=e.studentscores&&Array.isArray(e.studentscores[4])?e.studentscores[4]:[],z={},D=[];C.forEach((function(e){if(Object.keys(z).includes(e.studentid))if(Object.keys(z[e.studentid]).includes(e.subjectid));else{var t={};t.score=parseFloat(e.avgr),z[e.studentid][e.subjectid]=t;var a={};a.score=parseFloat(e.avgr),a.studentid=e.studentid,a.subjectid=e.subjectid,D.push(a)}else{var n={};n.score=e.avgr,z[e.studentid]={},z[e.studentid][e.subjectid]=n;var r={};r.score=e.avgr,r.studentid=e.studentid,r.subjectid=e.subjectid,D.push(r)}}));var R=e.studentscores&&Array.isArray(e.studentscores[5])?e.studentscores[5]:[],Y={},P=[];R.forEach((function(e){if(Object.keys(Y).includes(e.studentid))if(Object.keys(Y[e.studentid]).includes(e.subjectid));else{var t={};t.score=parseFloat(e.avgr),Y[e.studentid][e.subjectid]=t;var a={};a.score=parseFloat(e.avgr),a.studentid=e.studentid,a.subjectid=e.subjectid,P.push(a)}else{var n={};n.score=parseFloat(e.avgr),Y[e.studentid]={},Y[e.studentid][e.subjectid]=n;var r={};r.score=parseFloat(e.avgr),r.studentid=e.studentid,r.subjectid=e.subjectid,P.push(r)}}));var M=e.studentscores&&Array.isArray(e.studentscores[6])?e.studentscores[6]:[],J=[];M.forEach((function(e){var t={};t.average=parseFloat(e.avg),t.score=e.total,t.subjectid=e.nums,t.studentid=e.studentid,J.push(t)}));var L=e.studentscores&&Array.isArray(e.studentscores[7])?e.studentscores[7]:[],K=[];L.forEach((function(e){var t={};t.average=parseFloat(e.avgr),t.score=e.total,t.subjectid=e.nums,t.studentid=e.studentid,K.push(t)}));var B=e.studentscores&&Array.isArray(e.studentscores[8])?e.studentscores[8]:[],V={};B.forEach((function(e){Object.keys(V).includes(e.studentid)?Object.keys(V[e.studentid]).includes(e.subjectid)?Object.keys(V[e.studentid][e.subjectid]).includes(e.caid)||(V[e.studentid][e.subjectid][e.caid]=e.score):(V[e.studentid][e.subjectid]={},V[e.studentid][e.subjectid][e.caid]=e.score):(V[e.studentid]={},V[e.studentid][e.subjectid]={},V[e.studentid][e.subjectid][e.caid]=e.score)}));var G=e.reports&&Array.isArray(e.reports)?e.reports:[],U=G.filter((function(e){return null!==e})).map((function(e,t){return c.a.createElement("option",{key:t,value:e.id},e.title)})),H={};Object.keys(A).forEach((function(e){var t=P.filter((function(t){return parseInt(t.subjectid)===parseInt(e)}));t.sort((function(e,t){return t.score-e.score})),t.forEach((function(e,t,a){e.rank=0===t||e.score!=a[t-1].score?t+1:a[t-1].rank})),H[e]=t}));var q={};Object.keys(A).forEach((function(e){var t=D.filter((function(t){return parseInt(t.subjectid)===parseInt(e)}));t.sort((function(e,t){return t.score-e.score})),t.forEach((function(e,t,a){e.rank=0===t||e.score!=a[t-1].score?t+1:a[t-1].rank})),q[e]=t}));var X={};s.forEach((function(e){var t=e.id,a=J.filter((function(e){return parseInt(e.studentid)===parseInt(t)}));a.sort((function(e,t){return t.score-e.score})),a.forEach((function(e,t,a){e.rank=0===t||e.score!=a[t-1].score?t+1:a[t-1].rank})),X[t]=a}));var Q={};s.forEach((function(e){var t=e.id,a=K.filter((function(e){return parseInt(e.studentid)===parseInt(t)}));a.sort((function(e,t){return t.score-e.score})),a.forEach((function(e,t,a){e.rank=0===t||e.score!=a[t-1].score?t+1:a[t-1].rank})),Q[t]=a}));var Z=Array.isArray(e.cas)?e.cas:[],$={},ee={},te={},ae={},ne={};Z.forEach((function(e){if(1===parseInt(e.typeid)?Object.keys($).includes(e.sid)||($[e.sid]=e.caabbrv,ee[e.sid]=e.score):2===parseInt(e.typeid)?Object.keys($).includes(e.sid)||(te[e.sid]=e.caabbrv):3===parseInt(e.typeid)&&(Object.keys($).includes(e.sid)||(ae[e.sid]=e.caabbrv)),Object.keys(ne).includes(e.sid)){var t={};t.id=e.id,t.typeid=e.typeid,t.name=e.abbrv,t.score=e.maxscore,ne[e.sid].push(t)}else{ne[e.sid]=[];var a={};a.id=e.id,a.typeid=e.typeid,a.name=e.abbrv,a.score=e.maxscore,ne[e.sid].push(a)}}));var re=Object.keys($).map((function(e,t){return c.a.createElement("th",{key:t,colSpan:ne[e].length+1},$[e])})),ce=Object.keys($).map((function(e,t){return c.a.createElement(c.a.Fragment,null,Object.keys(ne[e]).map((function(t,a){return c.a.createElement("th",{key:a},ne[e][t].name,c.a.createElement("br",null),ne[e][t].score)})),c.a.createElement("th",null,ee[e]))})),se=Object.keys(A).filter((function(e){return null!==A[e]&&void 0!==A[e]&&A[e].length>0})).map((function(e,t){return c.a.createElement(j.mb,{key:t},c.a.createElement(j.nb,null,A[e],O===t))})),le=Object.keys(A).map((function(e,t){return c.a.createElement(W,{key:t,students:a,reportid:E,sessionid:u,classteacher:o,claszname:d,claszparent:m,claszparentname:p,subjectid:e,subjectname:A[e],theadm:re,theadm1:ce,data:s,ca_array:$,ca_score:ee,caunit_array:ne,arr:N[e],classparent_subject_average:w[e],class_subject_average:I[e],student_classparent_subject_position_store:q[e],student_class_subject_position_store:H[e],student_classparent_position_store:X,student_class_position_store:Q,student_ca_score_store:V})}));return c.a.createElement(c.a.Fragment,null,c.a.createElement(j.wb,{xs:12,className:"d-print-none"},c.a.createElement(j.u,{xs:12,md:4},c.a.createElement(j.K,null,c.a.createElement(j.u,{xs:"12",md:"12"},c.a.createElement(j.xb,{className:"my-auto",custom:!0,value:E,type:"search",onChange:function(e){return h(e.target.value)},placeholder:"Select a Report"},c.a.createElement("option",null,"Select an action"),U)))),c.a.createElement(j.u,{xs:12,md:4},c.a.createElement(j.u,{xs:12},c.a.createElement(j.f,{color:"info",block:!0},"Submit "))),c.a.createElement(j.u,{xs:12,md:4},c.a.createElement(j.f,{onClick:function(){var a;return t.push({pathname:"/results/".concat(E,"/1"),state:(a={report:parseInt(E)>0?G.filter((function(e){return parseInt(e.id)===parseInt(E)}))[0]:{},studentids:e.data1,students:e.data,sessionid:u,termid:e.term},Object(T.a)(a,"sessionid",e.session),Object(T.a)(a,"classteacher",e.classteacher),Object(T.a)(a,"clasz",e.clasz),Object(T.a)(a,"claszparent",e.claszparent),Object(T.a)(a,"claszname",e.claszname),Object(T.a)(a,"claszparentname",e.claszparentname),Object(T.a)(a,"activeterm",e.activeterm),Object(T.a)(a,"staffid",e.user.mid),Object(T.a)(a,"cas",e.cas),a)})},color:"success",block:!0},"Report Card "))),c.a.createElement(j.Kb,{activeTab:O,onActiveTabChange:function(e){return k(e)}},c.a.createElement(j.lb,{variant:"tabs",className:"d-print-none"},se),c.a.createElement(j.Ib,null,le)))})),X=Object(s.b)((function(e){return{user:e.userReducer,reports:e.reportReducer.reports,studentscores:e.studentscoreReducer.studentscores,cas:e.caReducer.cas}}),{getReports:V.c,getStudentscores:L.e,getCas:G.c})((function(e){var t=e.data1,a=e.data,s=e.term,l=e.session,u=(e.classteacher,e.clasz),o=e.claszparent,i=e.claszname,d=e.claszparentname,m=(e.activeterm,e.user.mid,Object(r.useState)(0)),p=Object(n.a)(m,2),f=p[0],y=p[1],b=Object(r.useState)(0),E=Object(n.a)(b,2),h=E[0],g=E[1];Object(r.useEffect)((function(){var t={data:JSON.stringify({sessionid:l}),cat:"selected",table:"reports",narration:"get reports"};e.getReports(t);var a={data:JSON.stringify({termid:s,schoolid:l}),cat:"dropdownca",table:"dropdownca",narration:"get ca"};e.getCas(a)}),[l]),Object(r.useEffect)((function(){var a=(e.reports&&Array.isArray(e.reports)?e.reports:[]).filter((function(e){return null!==e&&parseInt(e.id)===parseInt(f)})),n=Array.isArray(a)&&a.length>0?a[0].ca:"",r=n.length>0?JSON.parse(n).join(","):"";if(parseInt(f)>0){var c={data:JSON.stringify({sessionid:l,reportid:f,termid:s,ids:t,clasz:u,claszparent:o,cas:r}),cat:"selectreport",table:"studentscore",narration:"get reports"};e.getStudentscores(c)}}),[f,t,o,u]);var v=e.studentscores&&Array.isArray(e.studentscores[0])?e.studentscores[0]:[],O={},k={},S={};v.forEach((function(e){parseInt(e.subjectid)>-1&&(Object.keys(O).includes(e.subjectid)?Object.keys(O[e.subjectid]).includes(e.studentid)?Object.keys(O[e.subjectid][e.studentid]).includes(e.caid)||(O[e.subjectid][e.studentid][e.caid]=e.score):(O[e.subjectid][e.studentid]={},O[e.subjectid][e.studentid][e.caid]=e.score):(O[e.subjectid]={},O[e.subjectid][e.studentid]={},O[e.subjectid][e.studentid][e.caid]=e.score),Object.keys(k).includes(e.studentid)?Object.keys(k[e.studentid]).includes(e.subjectid)?Object.keys(k[e.studentid][e.subjectid]).includes(e.caid)||(k[e.studentid][e.subjectid][e.caid]=e.score):(k[e.studentid][e.subjectid]={},k[e.studentid][e.subjectid][e.caid]=e.score):(k[e.studentid]={},k[e.studentid][e.subjectid]={},k[e.studentid][e.subjectid][e.caid]=e.score),S[e.subjectid]=e.subjectname)}));var N=e.studentscores&&Array.isArray(e.studentscores[1])?e.studentscores[1]:[],x={};N.forEach((function(e){var t={};t.pop=e.students,t.average=e.avgr,t.maxscore=e.maxscore,t.score=e.score,x[e.subjectid]=t}));var A=e.studentscores&&Array.isArray(e.studentscores[2])?e.studentscores[2]:[],_={};A.forEach((function(e){var t={};t.pop=e.students,t.average=e.avgr,t.maxscore=e.maxscore,t.score=e.score,_[e.subjectid]=t}));var w=e.studentscores&&Array.isArray(e.studentscores[4])?e.studentscores[4]:[],F={},I=[];w.forEach((function(e){if(Object.keys(F).includes(e.studentid))if(Object.keys(F[e.studentid]).includes(e.subjectid));else{var t={};t.score=e.avgr,F[e.studentid][e.subjectid]=t;var a={};a.score=e.avgr,a.studentid=e.studentid,a.subjectid=e.subjectid,I.push(a)}else{var n={};n.score=e.avgr,F[e.studentid]={},F[e.studentid][e.subjectid]=n;var r={};r.score=e.avgr,r.studentid=e.studentid,r.subjectid=e.subjectid,I.push(r)}}));var C=e.studentscores&&Array.isArray(e.studentscores[5])?e.studentscores[5]:[],z={},D=[];C.forEach((function(e){if(Object.keys(z).includes(e.studentid))if(Object.keys(z[e.studentid]).includes(e.subjectid));else{var t={};t.score=e.avgr,z[e.studentid][e.subjectid]=t;var a={};a.score=e.avgr,a.studentid=e.studentid,a.subjectid=e.subjectid,D.push(a)}else{var n={};n.score=e.avgr,z[e.studentid]={},z[e.studentid][e.subjectid]=n;var r={};r.score=e.avgr,r.studentid=e.studentid,r.subjectid=e.subjectid,D.push(r)}}));var R=e.studentscores&&Array.isArray(e.studentscores[6])?e.studentscores[6]:[],Y=[];R.forEach((function(e){var t={};t.average=e.avg,t.score=e.total,t.subjectid=e.nums,t.studentid=e.studentid,Y.push(t)}));var P=e.studentscores&&Array.isArray(e.studentscores[7])?e.studentscores[7]:[],M=[];P.forEach((function(e){var t={};t.average=e.avg,t.score=e.total,t.subjectid=e.nums,t.studentid=e.studentid,M.push(t)}));var J=e.studentscores&&Array.isArray(e.studentscores[8])?e.studentscores[8]:[],T={};J.forEach((function(e){Object.keys(T).includes(e.studentid)?Object.keys(T[e.studentid]).includes(e.subjectid)?Object.keys(T[e.studentid][e.subjectid]).includes(e.caid)||(T[e.studentid][e.subjectid][e.caid]=e.score):(T[e.studentid][e.subjectid]={},T[e.studentid][e.subjectid][e.caid]=e.score):(T[e.studentid]={},T[e.studentid][e.subjectid]={},T[e.studentid][e.subjectid][e.caid]=e.score)}));var L=(e.reports&&Array.isArray(e.reports)?e.reports:[]).filter((function(e){return null!==e})).map((function(e,t){return c.a.createElement("option",{key:t,value:e.id},e.title)})),K={};Object.keys(S).forEach((function(e){var t=D.filter((function(t){return parseInt(t.subjectid)===parseInt(e)}));t.sort((function(e,t){return t.score-e.score})),t.forEach((function(e,t,a){e.rank=0===t||e.score!=a[t-1].score?t+1:a[t-1].rank})),K[e]=t}));var V={};Object.keys(S).forEach((function(e){var t=I.filter((function(t){return parseInt(t.subjectid)===parseInt(e)}));t.sort((function(e,t){return t.score-e.score})),t.forEach((function(e,t,a){e.rank=0===t||e.score!=a[t-1].score?t+1:a[t-1].rank})),V[e]=t}));var G={};a.forEach((function(e){var t=e.id,a=Y.filter((function(e){return parseInt(e.studentid)===parseInt(t)}));a.sort((function(e,t){return t.score-e.score})),a.forEach((function(e,t,a){e.rank=0===t||e.score!=a[t-1].score?t+1:a[t-1].rank})),G[t]=a}));var U={};a.forEach((function(e){var t=e.id,a=M.filter((function(e){return parseInt(e.studentid)===parseInt(t)}));a.sort((function(e,t){return t.score-e.score})),a.forEach((function(e,t,a){e.rank=0===t||e.score!=a[t-1].score?t+1:a[t-1].rank})),U[t]=a}));var W=Array.isArray(e.cas)?e.cas:[],H={},q={},X={},Q={},Z={};W.forEach((function(e){if(1===parseInt(e.typeid)?Object.keys(H).includes(e.sid)||(H[e.sid]=e.caabbrv,q[e.sid]=e.score):2===parseInt(e.typeid)?Object.keys(H).includes(e.sid)||(X[e.sid]=e.caabbrv):3===parseInt(e.typeid)&&(Object.keys(H).includes(e.sid)||(Q[e.sid]=e.caabbrv)),Object.keys(Z).includes(e.sid)){var t={};t.id=e.id,t.typeid=e.typeid,t.name=e.abbrv,t.score=e.maxscore,Z[e.sid].push(t)}else{Z[e.sid]=[];var a={};a.id=e.id,a.typeid=e.typeid,a.name=e.abbrv,a.score=e.maxscore,Z[e.sid].push(a)}}));var $=Object.keys(H).map((function(e,t){return c.a.createElement("th",{key:t,colSpan:Z[e].length+1},H[e])})),ee=Object.keys(H).map((function(e,t){return c.a.createElement(c.a.Fragment,null,Object.keys(Z[e]).map((function(t,a){return c.a.createElement("th",{key:a},Z[e][t].name,c.a.createElement("br",null),Z[e][t].score)})),c.a.createElement("th",null,q[e]))})),te=a.filter((function(e){return null!==e&&"null"!==e})).map((function(e,t){return c.a.createElement(j.mb,{key:t},c.a.createElement(j.nb,null,"".concat(e.surname," ").concat(e.firstname," ").concat(e.middlename),h===t))})),ae=a.filter((function(e){return null!==e&&"null"!==e})).map((function(e,t){return c.a.createElement(B,{key:t,studentid:e.id,studentname:e,claszname:i,claszparentname:d,theadm:$,theadm1:ee,data:S,ca_array:H,ca_score:q,caunit_array:Z,arr:k[e.id],classparent_subject_average:x,class_subject_average:_,student_classparent_subject_position_store:V,student_class_subject_position_store:K,student_classparent_position_store:G[e.id],student_class_position_store:U[e.id],student_ca_score_store:T[e.id]})}));return c.a.createElement(c.a.Fragment,null,c.a.createElement(j.wb,{xs:12,className:"d-print-none"},c.a.createElement(j.u,{xs:12,md:4,className:"d-print-none"},c.a.createElement(j.K,null,c.a.createElement(j.u,{xs:"12",md:"12"},c.a.createElement(j.xb,{className:"my-auto",custom:!0,value:f,type:"search",onChange:function(e){return y(e.target.value)},placeholder:"Select a Report"},c.a.createElement("option",null,"Select an action"),L)))),c.a.createElement(j.u,{xs:12,md:4},c.a.createElement(j.u,{xs:12},c.a.createElement(j.f,{color:"info",block:!0},"Submit "))),c.a.createElement(j.u,{xs:12,md:4})),c.a.createElement(j.Kb,{activeTab:h,onActiveTabChange:function(e){return g(e)}},c.a.createElement(j.lb,{variant:"tabs",className:"d-print-none"},te),c.a.createElement(j.Ib,null,ae)))})),Q=a(740),Z=Object(s.b)((function(e){return{subjects:e.subjectReducer.subjects,user:e.userReducer,staffsubjects:e.staffsubjectReducer.staffsubjects,staffs:e.staffReducer.staffs}}),{updateStaffsubject:P.f,registerStaffsubject:P.e,deleteStaffsubject:P.a,getStaffsubjects:P.c,getStaffs:F.e,getSubjects:Q.c})((function(e){var t=e.clasz,a=e.term,s=e.session,l=e.classteacher,u=Object(r.useState)(null),o=Object(n.a)(u,2),i=o[0],d=o[1],m=Object(r.useState)(null),p=Object(n.a)(m,2),f=p[0],y=p[1],b=Object(r.useState)(0),E=Object(n.a)(b,2),g=E[0],v=E[1],O=Object(r.useState)(0),k=Object(n.a)(O,2),S=k[0],N=k[1],x=Object(r.useState)(""),A=Object(n.a)(x,2),_=A[0],w=A[1],F=Object(r.useState)(""),I=Object(n.a)(F,2),C=I[0],z=I[1];Object(r.useEffect)((function(){var n={data:JSON.stringify({termid:a,itemid:t,sessionid:s,grp:2}),cat:"staffclass",table:"accessstaffsubject",narration:"get staffsubjects"};e.getStaffsubjects(n)}),[a,s,t]),Object(r.useEffect)((function(){if(void 0!==e.user.activeschool&&e.user.activeschool.hasOwnProperty("id")&&parseInt(e.user.activeschool.id)>0){var t={data:JSON.stringify({typeid:e.user.activeschool.typeid,is_active:0}),cat:"selected",table:"subjects",narration:"get Subjects"};e.getSubjects(t);var a={data:JSON.stringify({schoolid:e.user.activeschool.id,is_active:0,is_delete:0}),cat:"selected",table:"allstaffs",narration:"get staffs summary"};e.getStaffs(a)}}),[e.user.activeschool]);var D=function(){if(parseInt(f)>0){var n=new FormData;n.append("itemid",t),n.append("itemid1",g),n.append("clientid",f),n.append("contact",S),n.append("checker","2_"+a+"_"+f+"_"+t+"_"+g),n.append("table","accessstaffsubject"),n.append("sessionid",s),i&&parseInt(i)>0?(n.append("id",i),n.append("cat","updates"),e.updateStaffsubject(n)):a&&parseInt(a)>0&&(n.append("grp",2),n.append("termid",a),n.append("cat","inserts"),e.registerStaffsubject(n)),M(void 0)}},R=e.subjects&&Array.isArray(e.subjects)?e.subjects:[],Y=Array.isArray(R)?R.filter((function(e){return null!==e})).map((function(e,t){return c.a.createElement("option",{key:t,value:e.id},e.name)})):c.a.createElement("option",null),P=(e.staffs&&Array.isArray(e.staffs)?e.staffs:[]).filter((function(e){return null!==e})).map((function(e,t){return c.a.createElement("option",{key:t,value:e.id},e.surname," ",e.firstname," ",e.middlename)})),M=function(e){if(void 0!==e&&parseInt(e.id)>0){var t=e;d(t.id),y(t.clientid),z(t.clientname),v(t.itemid1),w(t.itemname1),N(t.contact)}else d(null),y(""),N("")},J=(e.staffsubjects&&Array.isArray(e.staffsubjects)?e.staffsubjects.filter((function(e){return null!==e||void 0!==e})):[]).filter((function(e){return null!=e})).map((function(t,a){return c.a.createElement("tr",{key:a},c.a.createElement("td",{className:"text-center"},a+1),c.a.createElement("td",null,parseInt(i)>0&&parseInt(i)===parseInt(t.id)?c.a.createElement(j.K,null,c.a.createElement(j.xb,{type:"text",id:"nf-staff",name:"staff",onChange:function(e){return y(e.target.value)},placeholder:""},c.a.createElement("option",{value:f},C),P)):t.clientname),c.a.createElement("td",{className:"text-left"},parseInt(i)>0&&parseInt(i)===parseInt(t.id)&&l?c.a.createElement(j.K,null,c.a.createElement(j.xb,{type:"text",id:"nf-subject",name:"subject",onChange:function(e){return v(e.target.value)},placeholder:""},c.a.createElement("option",{value:g},_),Y)):t.itemname1),c.a.createElement("td",{className:"text-center"},parseInt(i)>0&&parseInt(i)===parseInt(t.id)?c.a.createElement(j.S,{type:"number",id:"nf-contact",name:"contactz",value:S,onChange:function(e){return N(e.target.value)},placeholder:"0"}):t.contact),c.a.createElement("td",null),parseInt(i)>0&&parseInt(i)===parseInt(t.id)?c.a.createElement("td",{className:"text-center"},c.a.createElement(c.a.Fragment,null,c.a.createElement("a",{style:{cursor:"pointer"},className:"btn btn-sm",onClick:D},"Save"),c.a.createElement("a",{style:{cursor:"pointer"},className:"btn btn-sm",onClick:function(){return M({})}},"Clear"))):l?c.a.createElement("td",{className:"text-center"},c.a.createElement(c.a.Fragment,null,c.a.createElement("a",{style:{cursor:"pointer"},onClick:function(){return function(t,a){var n=0===parseInt(a)?1:0,r=new FormData;r.append("id",t),r.append("is_active",n),r.append("cat","updates"),r.append("sessionid",s),r.append("table","accessstaffclass"),r.append("narration","activate or disable class ".concat(n)),e.updateStaffsubject(r)}(t.id,t.is_active)}},c.a.createElement("i",{className:"fa ".concat(1==parseInt(t.is_active)?"fa-lock text-danger":"fa-unlock text-success"," ml-2 px-2")})),c.a.createElement("a",{style:{cursor:"pointer"},onClick:function(){return M(t)}},c.a.createElement("i",{className:"fa fa-edit ml-2 px-2"})),c.a.createElement("a",{style:{cursor:"pointer"},onClick:function(){return a=t,void h()("Are you sure you want to delete you will not be able to restore the data.").then((function(t){if(!0===t&&parseInt(a.id)>0){var n=new FormData;n.append("id",a.id),n.append("sessionid",s),n.append("table","accessstudentsubject"),n.append("cat","deletes"),e.deleteStaffsubject(n,a.id)}else h()("Not deleted")}));var a}},c.a.createElement("i",{className:"fa fa-remove ml-2 px-2 text-danger"})))):"")}));return c.a.createElement(c.a.Fragment,null,c.a.createElement("h4",null,"Manage Subject teachers ",c.a.createElement("small",null,"Assign permissions to Subject teachers so they can input scores.")),c.a.createElement("table",{className:"table table-hover table-outline mb-0  d-sm-table"},c.a.createElement("thead",{className:"thead-light"},c.a.createElement("tr",null,c.a.createElement("th",{className:"text-center"}," SN."),c.a.createElement("th",null,c.a.createElement("i",{className:"fa fa-users"})," STAFF NAME"),c.a.createElement("th",null,c.a.createElement("i",{className:"fa fa-book"})," SUBJECT"),c.a.createElement("th",null,c.a.createElement("i",{className:"fa fa-clock-o"})," PERIODS",c.a.createElement("br",null)," (PER WEEK)"),c.a.createElement("th",null,c.a.createElement("i",{className:"fa fa-blacboard"})," TIMING"),l?c.a.createElement("th",{className:"text-center"},c.a.createElement("i",{className:"fa fa-gear"})," Action"):"")),c.a.createElement("tbody",null,J,l?c.a.createElement("tr",null,c.a.createElement("td",null,"ADD"),c.a.createElement("td",null,c.a.createElement(j.xb,{type:"text",id:"nf-staff",name:"staff",onChange:function(e){return y(e.target.value)},placeholder:""},c.a.createElement("option",null),P)),c.a.createElement("td",null," ",c.a.createElement(j.xb,{type:"text",id:"nf-subject",name:"subject",onChange:function(e){return v(e.target.value)},placeholder:""},c.a.createElement("option",null),Y)),c.a.createElement("td",null,c.a.createElement(j.S,{type:"number",id:"nf-contact",name:"contactz",value:S,onChange:function(e){return N(e.target.value)},placeholder:"0"})),c.a.createElement("td",null),c.a.createElement("td",null,c.a.createElement("a",{style:{cursor:"pointer"},className:"btn btn-sm btn-info",onClick:D},"Save"))):"")))})),$=a(784);t.default=Object(s.b)((function(e){return{studentclasss:e.studentclassReducer,dropdowns:e.userReducer.dropdowns,termz:e.userReducer.activeterm,user:e.userReducer,classstaff:e.classstaffReducer}}),{getStudentclasss:l.d,getStudentclass:l.b,registerStudentclass:l.e,updateStudentclass:l.f,deleteStudentclass:l.a,getClassstaffs:$.c,getStudentsubjects:function(e){return function(t,a){e.token=m.e,t({type:d.i}),i.a.get(p,{params:e},m.l).then((function(e){t({type:d.f,payload:e.data})})).catch((function(e){t({type:d.j,payload:e})}))}},getStudentsubject:function(e){return function(t,a){t({type:d.g,payload:e})}},registerStudentsubject:function(e){return function(t){i.a.post(p,e,m.m).then((function(e){t({type:d.l,payload:e.data.data})})).catch((function(e){t({type:d.k,payload:e})}))}},updateStudentsubject:function(e){return function(t,a){console.log(e),i.a.post(p,e,m.m).then((function(e){t({type:d.n,payload:e.data.data})})).catch((function(e){t({type:d.m,payload:e})}))}},deleteStudentsubject:function(e,t){return function(a,n){i.a.post(p,e,m.m).then((function(e){a({type:d.d,payload:t})})).catch((function(e){a({type:d.c,payload:e})}))}},registerStaffstudent:u.c,getUserdropdowns:f.d,getUserTerms:f.c})((function(e){Object(y.i)();var t=Object(r.useState)(!1),a=Object(n.a)(t,2),s=a[0],l=a[1],u=Object(r.useState)(0),o=Object(n.a)(u,2),i=o[0],d=o[1],p=Object(r.useState)("Title"),f=Object(n.a)(p,2),E=f[0],g=f[1],k=Object(r.useState)(e.termz.termid),_=Object(n.a)(k,2),w=_[0],F=_[1],I=Object(r.useState)(e.termz.sessionid),z=Object(n.a)(I,2),R=z[0],Y=z[1],P=Object(r.useState)(0),M=Object(n.a)(P,2),T=M[0],L=M[1],K=Object(r.useState)(""),B=Object(n.a)(K,2),V=B[0],G=B[1],W=Object(r.useState)(""),H=Object(n.a)(W,2),Q=H[0],$=H[1],ee=Object(r.useState)(0),te=Object(n.a)(ee,2),ae=te[0],ne=te[1],re=Object(r.useState)(""),ce=Object(n.a)(re,2),se=ce[0],le=ce[1],ue=Object(r.useState)(!1),oe=Object(n.a)(ue,2),ie=oe[0],de=oe[1],me=Object(r.useState)(""),pe=Object(n.a)(me,2),fe=pe[0],ye=pe[1],be=Object(r.useState)(v()(new Date).format("YYYY-MM-DD")),Ee=Object(n.a)(be,2),he=Ee[0],ge=Ee[1];Object(r.useEffect)((function(){return parseInt(w)===parseInt(e.termz.termid)?l(!0):l(!1),function(){l(!1)}}),[w,e.termz.termid]),Object(r.useEffect)((function(){var t={data:JSON.stringify({termid:w,itemid:T,sessionid:R,grp:4}),cat:"studentclass",table:"accessstudentclassfull",narration:"get all student classs"};e.getStudentclasss(t);var a=e.dropdowns&&Array.isArray(e.dropdowns)?e.dropdowns:[[],[]],n="",r="",c="None | No Data";if(a.length>0){n=a[0].filter((function(e){return parseInt(e.id)===parseInt(w)})),r=a[1].filter((function(e){return parseInt(e.id)===parseInt(T)}));var s=Array.isArray(n)&&n.length>0?n[0].name:"Select term",l=Array.isArray(r)&&r.length>0?r[0].name:"Select class",u=Array.isArray(r)&&r.length>0?r[0].caname:"None";c=s+" | "+l,$(u),G(l)}g(c)}),[w,T]),Object(r.useEffect)((function(){var t={data:JSON.stringify({termid:w,sessionid:R,itemid:T,grp:1}),cat:"staffclass",table:"accessstaffclass",narration:"get classstaffs"};e.getClassstaffs(t)}),[he,T,R,w]),Object(r.useEffect)((function(){var t=void 0!==e.user.activeschool&&e.user.activeschool.hasOwnProperty("id")&&parseInt(e.user.activeschool.id)>0?e.user.activeschool.id:"null",a=void 0!==e.user.activeschool&&e.user.activeschool.hasOwnProperty("typeid")&&parseInt(e.user.activeschool.typeid)>0?e.user.activeschool.typeid:"null",n={data:JSON.stringify({schoolid:t,typeid:a}),cat:"dropdowns",table:"access",narration:"get all dropdowns"};e.getUserdropdowns(n);var r={data:JSON.stringify({schoolid:t}),cat:"accessterms",table:"access",narration:"get current term"};e.getUserTerms(r)}),[e.user.mid,e.user.activeschool.id,e.user.activeschool.typeid]);var ve=e.dropdowns&&Array.isArray(e.dropdowns)&&e.dropdowns.length>0?e.dropdowns:[[],[],[],[]],je="",Oe="";ve.length>0&&(je=ve[0].map((function(e,t){return c.a.createElement("option",{key:t,value:e.termid},e.name)})),Oe=ve[1].map((function(e,t){return c.a.createElement("option",{key:t,value:e.id},e.name)})),ve[2].map((function(e,t){return c.a.createElement("option",{key:t,value:e.id},e.name)})),ve[0].map((function(e,t){return c.a.createElement("option",{key:t,value:JSON.stringify(e)},e.name)})));var ke=function(){if(parseInt(se.id)>0&&parseInt(T)>0){var t=new FormData;t.append("itemid",T),t.append("itemid1",0),t.append("contact",0),t.append("clientid",se.id),t.append("checker","4_"+w+"_"+se.id+"_"+T),t.append("table","accessstudentclass"),t.append("sessionid",R),t.append("grp",4),t.append("termid",w),t.append("cat","inserts"),e.registerStudentclass(t)}else Object(m.n)("No Student of Class selected")},Se=e.classstaff.classstaffs&&Array.isArray(e.classstaff.classstaffs)&&e.classstaff.classstaffs.length>0?e.classstaff.classstaffs.filter((function(e){return null!==e||"null"!==e||void 0!==e})).filter((function(t){return null!==t&&parseInt(t.clientid)===parseInt(e.user.mid)})):[],Ne=!!(Array.isArray(Se)&&Se.length>0),xe=e.studentclasss.studentclasss&&Array.isArray(e.studentclasss.studentclasss)?e.studentclasss.studentclasss.filter((function(e){return null!==e||void 0!==e})):[],Ae=xe;fe.length>0&&void 0!==fe&&(Ae=xe.filter((function(e){return e.surname.toLowerCase().includes(fe.toLowerCase())||e.firstname.toLowerCase().includes(fe.toLowerCase())||e.middlename.toLowerCase().includes(fe.toLowerCase())||e.admission_no.toLowerCase().includes(fe.toLowerCase())})));var _e=Ae.filter((function(e){return null!==e&&void 0!==e})).map((function(e,t){return e.id})).join(",");return c.a.createElement(c.a.Fragment,null,c.a.createElement(j.wb,{xs:12,className:"d-print-none"},c.a.createElement(j.u,{xs:"12",md:"12",className:"d-print-none"},0===i?c.a.createElement(j.j,{xs:"12",md:"12"},c.a.createElement(j.n,null,c.a.createElement(j.wb,{className:"mt-2 m-2"},c.a.createElement(j.u,{md:12},c.a.createElement(j.J,{action:"",method:"post"},c.a.createElement(j.wb,{xs:12},c.a.createElement(j.u,null,c.a.createElement(j.wb,null,c.a.createElement(j.u,{xs:"12",sm:"4",md:"5",lg:"5",className:"ml-0"},c.a.createElement(j.K,{row:!0},c.a.createElement(j.V,null,c.a.createElement(j.X,null,c.a.createElement(j.Y,null,"Select Term")),c.a.createElement(j.xb,{custom:!0,size:"md",name:"term",id:"term",onChange:function(t){return function(t){F(t);var a=e.dropdowns&&Array.isArray(e.dropdowns)?e.dropdowns:[[],[]],n="",r=0;a.length>0&&(n=a[0].filter((function(e){return parseInt(e.termid)===parseInt(t)})),r=Array.isArray(n)&&n.length>0?n[0].sessionid:0),Y(r)}(t.target.value)}},c.a.createElement("option",{value:"0"},"Select Term"),je)))),c.a.createElement(j.u,{xs:"12",sm:"4",md:"4",lg:"4",className:"ml-0"},c.a.createElement(j.K,{row:!0},c.a.createElement(j.V,null,c.a.createElement(j.X,null,c.a.createElement(j.Y,null,"Select Class")),c.a.createElement(j.xb,{custom:!0,size:"md",name:"clasz",id:"clasz",value:T,onChange:function(t){return function(t){L(t);var a=e.dropdowns&&Array.isArray(e.dropdowns)?e.dropdowns:[[],[]],n="",r=0;a.length>0&&(n=a[1].filter((function(e){return parseInt(e.id)===parseInt(t)})),r=Array.isArray(n)&&n.length>0?n[0].sid:0),ne(r)}(t.target.value)}},c.a.createElement("option",{value:"0"},"Select Class"),Oe)))),c.a.createElement(j.u,{xs:"12",sm:"3",md:"3",lg:"3",className:"ml-0"},c.a.createElement(j.K,{className:""},c.a.createElement(b.b,{type:"submit",className:"btn btn-success  btn-sm",color:"primary",onClick:ke},c.a.createElement(O.a,{name:"cil-cloud-download"})))))),c.a.createElement(j.u,{xs:"2",md:"2"},parseInt(w)>0&&parseInt(T)>0?c.a.createElement(j.Rb,{content:"Add a student to this class"},c.a.createElement(j.f,{"data-target":"#formz","data-toggle":"collapse",color:"primary",size:"sm",onClick:function(){return de((function(e){return!e}))},className:"float-right"},c.a.createElement(O.a,{name:"cil-user-plus"}))):""))))),c.a.createElement(j.v,{show:ie},c.a.createElement(D,{len:5,subject:[],studentdata:se,goBack:e.goBack,placeStudent:function(e){le(e)},loadStudent:ke,setStudentdata:function(e){return le(e)}})))):"")),c.a.createElement(j.wb,null,c.a.createElement(j.u,{xs:"12",md:"12",className:"mb-4"},c.a.createElement(j.j,null,c.a.createElement(j.n,null,c.a.createElement(j.wb,null,c.a.createElement(j.u,{sm:"10"},c.a.createElement("h4",{id:"traffic",className:"card-title mb-0"},E),c.a.createElement("div",{className:"small text-muted"},e.user.activeschool.name)),c.a.createElement(j.u,{sm:"2"},c.a.createElement(j.Rb,{content:"Set Attendance date"},c.a.createElement(j.f,{"data-target":"#formz","data-toggle":"collapse",color:"primary",className:"float-right",onClick:function(){return function(e){window.open("/ems"+"#/attendance_student/".concat(e))}(T)}},c.a.createElement(O.a,{name:"cil-calendar"})))))),c.a.createElement(j.k,null,c.a.createElement(j.Kb,{activeTab:i,onActiveTabChange:function(e){return d(e)}},c.a.createElement(j.lb,{className:"d-print-none",variant:"tabs"},c.a.createElement(j.mb,null,c.a.createElement(j.nb,null,c.a.createElement(O.a,{name:"cil-settings"}),0===i&&" Setting")),c.a.createElement(j.mb,null,c.a.createElement(j.nb,null,c.a.createElement(O.a,{name:"cil-chart-pie"}),1===i&&" Chart")),c.a.createElement(j.mb,null,c.a.createElement(j.nb,null,c.a.createElement(O.a,{name:"cil-calculator"}),2===i&&" Biodata")),c.a.createElement(j.mb,null,c.a.createElement(j.nb,null,c.a.createElement(O.a,{name:"cil-map"}),3===i&&" Next of Kin")),c.a.createElement(j.mb,null,c.a.createElement(j.nb,null,c.a.createElement("i",{className:"fa fa-image"}),4===i&&" Gallery")),c.a.createElement(j.mb,null,c.a.createElement(j.nb,null,c.a.createElement("i",{className:"fa fa-money"}),5===i&&" Fees")),c.a.createElement(j.mb,null,c.a.createElement(j.nb,null,c.a.createElement(O.a,{name:"cil-user"}),6===i&&" Subject Teachers")),c.a.createElement(j.mb,null,c.a.createElement(j.nb,null,c.a.createElement(O.a,{name:"cil-notes"}),7===i&&" Subject Report ")),c.a.createElement(j.mb,null,c.a.createElement(j.nb,null,c.a.createElement(O.a,{name:"cil-badge"}),8===i&&" Student Report")),c.a.createElement(j.mb,null,c.a.createElement(j.nb,null,c.a.createElement(O.a,{name:"cil-spreadsheet"}),9===i&&" Spreadsheet"))),c.a.createElement(j.Ib,null,c.a.createElement(j.Jb,null,c.a.createElement(J,{term:w,clasz:T,session:R,onRemove:function(t){return a=t,void h()("Are you sure you want to delete this information, You will not be able to restore the data.").then((function(t){if(1==t&&parseInt(a)>0){var n=new FormData;n.append("id",a),n.append("sessionid",R),n.append("table","accessstudentsubject"),n.append("cat","deletes"),e.deleteStudentclass(n,a)}else h()("Not deleted")}));var a},setsearch:function(e){return ye(e)},dateactive:he,data1:_e,data:Ae,activeterm:s,setDates:function(e){return ge(e)},classteacher:Ne,placeStudentSubject:function(t){return function(t){var a=new FormData;a.append("claszid",T),a.append("termid",w),a.append("subjectid",t),a.append("sessionid",R),a.append("staffid",e.user.mid),a.append("grp",4),a.append("table","accessstudentclass"),a.append("cat","insertsubject"),e.registerStaffstudent(a)}(t)}})),c.a.createElement(j.Jb,null,c.a.createElement(S,{data:Ae})),c.a.createElement(j.Jb,null,c.a.createElement(A,{data:Ae})),c.a.createElement(j.Jb,null,c.a.createElement(N,{data:Ae})),c.a.createElement(j.Jb,null,c.a.createElement(x,{data:Ae})),c.a.createElement(j.Jb,null,c.a.createElement(C,{termid:w,claszparentid:ae,sessionid:R,data:Ae,data1:_e,classteacher:Ne})),c.a.createElement(j.Jb,null,c.a.createElement(Z,{term:w,clasz:T,session:R,dateactive:he,data1:_e,data:Ae,activeterm:s,classteacher:Ne,claszparentid:ae})),c.a.createElement(j.Jb,null,c.a.createElement(q,{term:w,clasz:T,session:R,dateactive:he,data1:_e,data:Ae,activeterm:s,classteacher:Ne,claszparent:ae,claszparentname:Q,claszname:V})),c.a.createElement(j.Jb,null,c.a.createElement(X,{term:w,clasz:T,session:R,dateactive:he,data1:_e,data:Ae,activeterm:s,classteacher:Ne,claszparent:ae,claszparentname:Q,claszname:V})),c.a.createElement(j.Jb,null,c.a.createElement(U,{term:w,clasz:T,session:R,dateactive:he,data1:_e,data:Ae,activeterm:s,classteacher:Ne,claszparentid:ae,claszparentname:Q,claszname:V})))))))))}))}}]);
//# sourceMappingURL=9.fa3876dd.chunk.js.map