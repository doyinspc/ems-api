(this.webpackJsonpmesl=this.webpackJsonpmesl||[]).push([[50],{1361:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a(698),c=a(697),l=a(3),u=a.n(l),o=a(217),s=a(795),i=a(702),f=a.n(i),d=a(6),m=function(t){var e=Object(l.useState)("#ccc"),a=Object(r.a)(e,2),n=a[0],c=a[1];return Object(l.useEffect)((function(){if(new Date(t.mydate)<=new Date&&6!==new Date(t.mydate).getDay()&&0!==new Date(t.mydate).getDay())if(t.candidates.split(",").includes(t.client))if(parseInt(t.issue)>0){var e=d.s.filter((function(e){return parseInt(e.id)===parseInt(t.issue)}));c(e[0].color),t.setData(t.client,parseInt(t.issue))}else c("#cfc"),t.setData(t.client,1);else c("#ccc"),t.setData(t.client,0);return function(){c("#ccc")}}),[t.mydate]),u.a.createElement(u.a.Fragment,null,u.a.createElement("td",{className:"text-center",style:{backgroundColor:n,width:"25px"}}))};e.default=Object(o.b)((function(t){return{staffs:t.staffReducer.staffs,staffattendance:t.staffattendanceReducer,user:t.userReducer}}),{getStaffattendances:s.e,getStaffattendancedailys:s.d,getStaffattendance:s.c,registerStaffattendance:s.f,registerStaffattendancedaily:s.g,updateStaffattendance:s.h,updateStaffattendancedaily:s.i,deleteStaffattendance:s.a,deleteStaffattendancedaily:s.b})((function(t){new Date;var e=Object(l.useState)(new Date((new Date).getFullYear(),(new Date).getMonth(),-1)),a=Object(r.a)(e,2),o=a[0],s=a[1],i=Object(l.useState)(new Date((new Date).getFullYear(),(new Date).getMonth()+1,0)),p=Object(r.a)(i,2),y=p[0],g=p[1],h=Object(l.useState)({}),D=Object(r.a)(h,2),E=D[0],b=D[1];Object(l.useEffect)((function(){var e={data:JSON.stringify({schoolid:t.user.activeschool.id,grp:1,starts:f()(o).format("YYYY-MM-DD"),ends:f()(y).format("YYYY-MM-DD")}),cat:"selectedattendance",table:"attendances",narration:"get all staffs"};t.getStaffattendances(e);var a={data:JSON.stringify({clients:t.user.activeschool.id,schoolid:t.user.activeschool.id,grp:5,starts:f()(o).format("YYYY-MM-DD"),ends:f()(y).format("YYYY-MM-DD")}),cat:"selectedattendance",table:"attendances",narration:"get all attendance"};t.getStaffattendancedailys(a)}),[o,y]);var w=Array.isArray(t.staffattendance.staffattendancedailys)&&void 0!==t.staffattendance.staffattendancedailys?t.staffattendance.staffattendancedailys:[],Y={};w.forEach((function(t){return Y[t.dates]=t.reason}));var v=Array.isArray(t.staffattendance.staffattendances)&&void 0!==t.staffattendance.staffattendances?t.staffattendance.staffattendances:[],S={};v.forEach((function(t){return S[t.dates+"_"+t.clients]=t.leaveid}));for(var O=[],M=o,j=y,k=new Date(M),x=M;new Date(x)<new Date(j);){x=k.toISOString().slice(0,10);O.push(x),k.setDate(k.getDate()+1)}var N=O.map((function(t,e){return u.a.createElement("td",{key:e,className:"text-center",style:{width:"25px"}},u.a.createElement("strong",null,f()(new Date(t)).format("dd")))})),A=O.map((function(t,e){return u.a.createElement(u.a.Fragment,null,u.a.createElement("td",{key:e,className:"text-center"},u.a.createElement("strong",null,new Date(t).getDate())))})),I=d.s.map((function(t,e){return u.a.createElement("td",{key:e,rowSpan:2},u.a.createElement("small",{style:{textOrientation:"upright"}},t.name))})),F=t.staffs.map((function(t,e){var a=[];return u.a.createElement("tr",{key:e+"_"+t.id},u.a.createElement("td",{className:"text-right"},u.a.createElement("strong",{className:"text-nowrap"},"".concat(t.surname," ").concat(t.firstname," ").concat(t.middlename))),O.map((function(e,r){var c=Y[f()(e).format("YYYY-MM-DD")]?Y[f()(e).format("YYYY-MM-DD")]:"",l=S[f()(e).format("YYYY-MM-DD")+"_"+t.id]?S[f()(e).format("YYYY-MM-DD")+"_"+t.id]:0,o=function(t,e,a,n){if(new Date(t)<=new Date&&6!==new Date(t).getDay()&&0!==new Date(t).getDay())return e.split(",").includes(a)?parseInt(n)>0?parseInt(n):1:0}(e,c,t.id,l);return a.push(o),u.a.createElement(u.a.Fragment,null,u.a.createElement(m,{candidates:c,client:t.id,issue:l,mydate:e,key:r,setData:function(t,e){return function(t,e){var a=Object(n.a)({},E);a.hasOwnProperty(t)?(a[t].push(e),b(a)):(a[t]=[],a[t].push(e),b(a))}(t,e)}}))})),d.s.map((function(t,e){var n=Array.isArray(a)?a.filter((function(e){return parseInt(e)===parseInt(t.id)})).length:0;return u.a.createElement("td",{key:e,className:"text-center"},n)})))}));return u.a.createElement(u.a.Fragment,null,u.a.createElement(c.wb,{className:" d-flex row mb-20"},d.s.map((function(t,e){return u.a.createElement(c.f,{key:e,className:"text-center",style:{backgroundColor:t.color}},u.a.createElement("strong",null,t.name))}))),u.a.createElement(c.wb,{className:"m-10"},u.a.createElement(c.u,null,u.a.createElement(c.cb,null,u.a.createElement("strong",null,"Start Date")),u.a.createElement(c.S,{name:"starts",type:"date",value:o,onChange:function(t){return s(t.target.value)}})),u.a.createElement(c.u,null,u.a.createElement(c.cb,null,u.a.createElement("strong",null,"End Date")),u.a.createElement(c.S,{name:"ends",type:"date",value:y,onChange:function(t){return g(t.target.value)}}))),u.a.createElement(c.w,{fluid:!0},u.a.createElement(c.wb,{scrolling:!0},u.a.createElement("table",{border:"ipx solid",style:{backgroundColor:"white",marginTop:"50px"}},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",{className:"text-center"},u.a.createElement("strong",null,"DAYS")),N,I),u.a.createElement("tr",null,u.a.createElement("th",{className:"text-center"},u.a.createElement("strong",null,"STAFF NAMES")),A)),u.a.createElement("tbody",null,F)))))}))},698:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var n=a(219);function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var a=[],n=!0,r=!1,c=void 0;try{for(var l,u=t[Symbol.iterator]();!(n=(l=u.next()).done)&&(a.push(l.value),!e||a.length!==e);n=!0);}catch(o){r=!0,c=o}finally{try{n||null==u.return||u.return()}finally{if(r)throw c}}return a}}(t,e)||Object(n.a)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},795:function(t,e,a){"use strict";a.d(e,"e",(function(){return o})),a.d(e,"d",(function(){return s})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return f})),a.d(e,"b",(function(){return d})),a.d(e,"f",(function(){return m})),a.d(e,"g",(function(){return p})),a.d(e,"h",(function(){return y})),a.d(e,"i",(function(){return g}));var n=a(700),r=a.n(n),c=a(28),l=a(6),u=l.c,o=function(t){return function(e,a){t.token=l.e,e({type:c.j}),r.a.get(u,{params:t},l.l).then((function(t){e({type:c.h,payload:t.data})})).catch((function(t){e({type:c.k,payload:t})}))}},s=function(t){return function(e,a){t.token=l.e,e({type:c.j}),r.a.get(u,{params:t},l.l).then((function(t){e({type:c.g,payload:t.data})})).catch((function(t){e({type:c.k,payload:t})}))}},i=function(t){return function(e,a){e({type:c.i,payload:t})}},f=function(t){return function(e,a){r.a.POST(u,{params:t},l.l).then((function(a){e({type:c.e,payload:t.id})})).catch((function(t){e({type:c.d,payload:t})}))}},d=function(t){return function(e,a){r.a.POST(u,{params:t},l.l).then((function(a){e({type:c.c,payload:t.id})})).catch((function(t){e({type:c.d,payload:t})}))}},m=function(t){return function(e){r.a.post(u,t,l.m).then((function(t){e({type:c.n,payload:t.data.data})})).catch((function(t){e({type:c.m,payload:t})}))}},p=function(t){return function(e){r.a.post(u,t,l.m).then((function(t){e({type:c.l,payload:t.data.data})})).catch((function(t){e({type:c.m,payload:t})}))}},y=function(t){return function(e,a){r.a.post(u,t,l.m).then((function(t){e({type:c.q,payload:t.data.data})})).catch((function(t){e({type:c.p,payload:t})}))}},g=function(t){return function(e,a){r.a.post(u,t,l.m).then((function(t){e({type:c.o,payload:t.data.data})})).catch((function(t){e({type:c.p,payload:t})}))}}}}]);
//# sourceMappingURL=50.bdedb2b5.chunk.js.map